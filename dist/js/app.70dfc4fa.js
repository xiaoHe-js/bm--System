(function(t){function e(e){for(var n,s,l=e[0],o=e[1],c=e[2],p=0,d=[];p<l.length;p++)s=l[p],r[s]&&d.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0033":function(t,e,a){},"03f9":function(t,e,a){},"0545":function(t,e,a){},"0a09":function(t,e,a){"use strict";var n=a("8bec"),r=a.n(n);r.a},"0b24":function(t,e,a){},"0e13":function(t,e,a){},1235:function(t,e,a){"use strict";var n=a("9d81"),r=a.n(n);r.a},1377:function(t,e,a){"use strict";var n=a("6a3b"),r=a.n(n);r.a},"17a2":function(t,e,a){},1884:function(t,e,a){"use strict";var n=a("b443"),r=a.n(n);r.a},"1bde":function(t,e,a){"use strict";var n=a("7ddc"),r=a.n(n);r.a},"1c03":function(t,e,a){},2927:function(t,e,a){"use strict";var n=a("cc04"),r=a.n(n);r.a},"2a50":function(t,e,a){"use strict";var n=a("17a2"),r=a.n(n);r.a},"31fc":function(t,e,a){},"333f":function(t,e,a){"use strict";var n=a("1c03"),r=a.n(n);r.a},3832:function(t,e,a){},"3cd63":function(t,e,a){},"3df3":function(t,e,a){"use strict";var n=a("ec18"),r=a.n(n);r.a},4084:function(t,e,a){},4277:function(t,e,a){"use strict";var n=a("6676"),r=a.n(n);r.a},"429f":function(t,e,a){},"444d":function(t,e,a){"use strict";var n=a("fa28"),r=a.n(n);r.a},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18c","./et.js":"ec18c","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=i(t);return a(e)}function i(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id="4678"},"47d5":function(t,e,a){"use strict";var n=a("b58c"),r=a.n(n);r.a},"48d6":function(t,e,a){"use strict";var n=a("8dbc"),r=a.n(n);r.a},"49d6":function(t,e,a){"use strict";var n=a("429f"),r=a.n(n);r.a},"4f54":function(t,e,a){"use strict";var n=a("674b"),r=a.n(n);r.a},"4fde":function(t,e,a){"use strict";var n=a("4084"),r=a.n(n);r.a},5214:function(t,e,a){},"53b1":function(t,e,a){"use strict";var n=a("adbf"),r=a.n(n);r.a},5552:function(t,e,a){"use strict";var n=a("03f9"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n,r,i,s,l=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],u=(a("7c55"),a("2877")),p={},d=Object(u["a"])(p,o,c,!1,null,null,null),m=d.exports,f=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("el-container",{staticClass:"home-wrap"},[a("el-header",{staticStyle:{height:"88px"}},[a("div",{staticClass:"logo"},[a("span",{staticClass:"logo-title"},[t._v("积分管理后台")])]),a("div",{staticClass:"header-nav"},[a("div",{staticClass:"username"},[t._v(t._s(t.userName))]),a("router-link",{staticClass:"layout",attrs:{to:"/login"}},[t._v("退出登录")])],1)]),a("el-container",{staticClass:"home-inner"},[a("el-aside",{attrs:{width:"215px"}},[a("el-menu",{staticClass:"home-aside-menu",attrs:{"default-active":t.activeKey},on:{select:t.handlerMenuClick}},t._l(t.asideList,function(e,n){return a("el-submenu",{key:n,attrs:{index:e.key}},[a("template",{slot:"title"},[e.icon?a("i",{class:e.icon}):t._e(),t._v(t._s(e.name))]),t._l(e.children,function(e,n){return a("span",{key:n,attrs:{index:e.key}},[e.children?a("el-menu-item-group",[a("template",{slot:"title"},[t._v(t._s(e.name))]),t._l(e.children,function(e,n){return a("el-menu-item",{key:n,attrs:{route:{name:e.key},index:e.key}},[e.icon?a("i"):t._e(),t._v(t._s(e.name)+"\n                ")])})],2):t._e(),e.children?t._e():a("el-menu-item",{attrs:{index:e.key,route:{name:e.key}}},[e.icon?a("i"):t._e(),t._v(t._s(e.name)+"\n              ")])],1)})],2)}),1)],1),a("el-main",{staticClass:"home-content"},[a("router-view")],1)],1)],1)],1)},g=[],v=(a("7f7f"),{name:"home",data:function(){return{activeKey:"dataProfile",activeTab:"",asideList:[{name:"数据概览",icon:"el-icon-tickets",key:"data",children:[{name:"数据概览",key:"totalDataProfile"},{name:"聚驿数据",key:"juyiProfile"},{name:"很实惠数据",key:"hshProfile"}]},{name:"平台用户管理",icon:"el-icon-message",key:"platformUserManage",children:[{name:"用户数据",key:"platformUserData"},{name:"活跃数据",key:"platformActiveData"}]},{name:"资产管理",icon:"el-icon-coin",key:"IntegralIndex",children:[{name:"积分管理",key:"IntegralManage"},{name:"积分资产",key:"IntegralAsset"},{name:"积分购买",key:"IntegralBuy"}]},{name:"爱兑分用户管理",icon:"el-icon-setting",key:"aiDuiFen",children:[{name:"用户数据",key:"aiduifenUserData"},{name:"活跃数据",key:"aiduifenActiveData"}]},{name:"积分商城管理",icon:"el-icon-goods",key:"points-mall",children:[{name:"商品列表",key:"pointsMallGoodList"},{name:"拼多多商品列表",key:"pointsMallPddGoodList"},{name:"优惠券列表",key:"pointsMallCouponList"}]},{name:"积分活动管理",icon:"el-icon-s-home",key:"integralActiveManage",children:[{name:"邀请好友送积分",key:"inviteSendPoints"},{name:"翻牌换商品数据",key:"turnCardExchangeData"}]}]}},computed:{userName:function(){return sessionStorage.getItem("userName")||this.$store.state.userName},changedAsideActiveName:function(){return this.$store.state.changedAsideActiveName}},watch:{changedAsideActiveName:function(t){t&&(this.activeKey=t)}},created:function(){var t=this,e=t.$route;t.activeKey=e.name},methods:{handlerMenuClick:function(t){this.$router.push({name:t}),this.$store.dispatch("setChangedAsideActiveName",t)}}}),b=v,y=(a("de16"),Object(u["a"])(b,h,g,!1,null,null,null)),D=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("section",{staticClass:"content"},[a("div",{staticClass:"content-inner"},[t._m(0),a("div",{staticClass:"login-image"}),a("el-form",{ref:"loginForm",attrs:{model:t.form,rules:t.formRules}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{placeholder:"账号"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit}},[t._v("登录")])],1)],1)],1)]),a("footer",{staticClass:"footer"},[t._v("\n    Copyright © 2019 深圳玖昔科技发展股份有限公司\n  ")])])},w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("h1",[t._v("积分管理后台")]),a("div",{staticClass:"tips"},[t._v("Integral Management Background")])])}],_=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),k=a("bc3a"),x=a.n(k),S=a("5c96"),T=a.n(S),P=a("4328"),j=a.n(P),A=a("7618");a("3b2b"),a("a481"),a("c5f6"),a("28a5"),a("6b54");function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,e=["-dev","new.","web2.","vote2.","difference2.","draw2.","home2."],a=["-test","wx.","web1.","vote1.","difference1.","draw1.","home1."],n=function(e){return t.indexOf(e)>=0},r=e.some(n),i=a.some(n);return r?"dev":i?"test":"prod"}function N(t){return z(t)||V(t)}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="";if(N(t)){var n=function(t,n){N(t)?(e=e?"".concat(e,"[").concat(n,"]"):n,a+=L(t,e)):a+="&".concat(e,"[").concat(n,"]=").concat(t)};if(z(t))for(var r=0;r<t.length;r++)n(t[r],r);if(V(t))for(var i in t)n(t[i],i)}else a+="&".concat(e,"=").concat(t);return a}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var a in t)e+=I(t[a],a);return e.replace("&","")}function z(t){return"[object Array]"===toString.call(t)}function V(t){return"[object Object]"===toString.call(t)}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(t){if("number"===typeof t)t=String(t);else if(isNaN(Number(t)))return t;if(t.length<=e)return t;var a=t.split("."),n=a[0],r=3,i="",s="",l="";return Number(n)<0&&(n=n.slice(1),i="-"),a[1]&&(s="."+a[1]),n.length<=r?t:(l=M(n),i+l+s)}return t}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if("number"===typeof t&&(t=String(t)),t.length<=e)return t;var a=t.length%e,n=Math.floor(t.length/e),r=[];0===a&&(a+=e,n-=1),r.push(t.slice(0,a));for(var i=0;i<n;i++)r.push(t.slice(a,a+e)),a+=e;return r.join(",")}function $(t){var e=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#\/%?=~_|!:,.;]+[-A-Za-z0-9+&@#\/%=~_|]/;return e.test(t)}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";if(null!=t){"string"===Object(A["a"])(t).toLowerCase()&&(t=Number(t)),t=10==t.length?new Date(1e3*t):new Date(t);var a={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};return e=e.replace(/(M+|d+|h+|m+|s+)/g,function(t){return((t.length>1?"0":"")+a[t.slice(-1)]).slice(-2)}),e.replace(/(y+)/g,function(e){return t.getFullYear().toString().slice(-e.length)})}}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=Object(A["a"])(Number(t));if("number"!==a)return 0;var n=String(t).indexOf(".");if(-1!==n){var r=Number(t).toFixed(e);return Number(r)||0}return Number(t)||0}if(/^localhost/.test(location.host))n="http://medialibs-dev.idouzi.com",i="http://data-manage-backend-dev.henshihui.com",s="http://mall-dev.henshihui.com",r="http://admin-dev.idouzi.com";else switch(O()){case"dev":n="http://medialibs-dev.idouzi.com",i="http://data-manage-backend-dev.henshihui.com",s="http://mall-dev.henshihui.com",r="http://admin-dev.idouzi.com";break;case"test":n="http://medialibs-test.idouzi.com",i="http://data-manage-backend-test.henshihui.com",s="http://mall-test.henshihui.com",r="http://admin-test.idouzi.com";break;case"prod":n="http://medialibs.idouzi.com",i="http://data-manage-backend.henshihui.com",s="http://mall.henshihui.com",r="http://admin.idouzi.com";break;default:n="http://medialibs.idouzi.com",i="http://data-manage-backend.henshihui.com",s="http://mall.henshihui.com",r="http://admin.idouzi.com";break}var q={medialibs:n,admin:r,backend:i,henshihuiMall:s};function G(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function Y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?G(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var R=x.a.create({baseURL:q.backend,timeout:15e3,withCredentials:!0});function H(t){for(var e=[q.medialibs],a=0;a<e.length;a++){var n=e[a];if(-1!==t.url.indexOf(n))return!1}return t.method,!0}R.interceptors.request.use(function(t){H(t)&&(t.data=j.a.stringify(t.data));var e=sessionStorage.getItem("t");return t.params=Y({t:e},t.params),t},function(t){return Promise.reject(t)}),R.interceptors.response.use(function(t){var e=t.data,a=e.return_code,n=e.return_msg,r=window.vm;if("options"!==t.config.method){if("SUCCESS"===a)return n;if("GUEST"!=n&&"GUEST"!==a)return Object(S["Message"])({type:"error",message:n}),Promise.reject(n);var i=r&&r.$route.fullPath;Object(S["Message"])({type:"error",message:"登陆过期，请重新登陆"}),sessionStorage.setItem("historyUrl",i||location.href),setTimeout(function(){r.$router.push({path:"/login"})},1e3)}},function(t){return Object(S["Message"])({message:t.return_msg,type:"error",duration:5e3}),Promise.reject(t)});var Q=R;function B(t){return Q({url:q.admin+"/amount/login",method:"post",data:t})}function K(t){return Q({url:q.admin+"/amount/verify-code",method:"post",data:t})}var J={name:"login",data:function(){return{form:{userName:"",password:""},formRules:{userName:{required:!0,message:"请输入账户",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}}}},methods:{submit:function(){var t=this;t.$refs.loginForm.validate(function(e){B(t.form).then(function(e){t.$message({message:"短信验证码发送成功",type:"success"}),t.sendValidCode()})})},sendValidCode:function(){var t=this,e=this;e.$prompt("请输入短信验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(t){return""!==t&&void 0!==t&&null!==t||"请输入短信验证码"}}).then(function(t){var a=t.value;K({code:a}).then(function(t){var a=sessionStorage.getItem("historyUrl");e.ConfirmButtonLoading=!1,sessionStorage.setItem("t",t),sessionStorage.setItem("userName",e.form.userName),e.$store.dispatch("setUserName",e.form.userName),$(a)?location.href=a:a&&"/login"!=a?e.$router.push({path:a}):e.$router.push({path:"/"})})}).catch(function(){t.$message({type:"info",message:"取消输入"})})}}},W=J,Z=(a("4fde"),Object(u["a"])(W,C,w,!1,null,null,null)),X=Z.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-profile"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"数据概况",name:"profile"}}),a("el-tab-pane",{attrs:{label:"活跃数据",name:"active"}}),a("el-tab-pane",{attrs:{label:"资产数据",name:"asset"}}),a("el-tab-pane",{attrs:{label:"流失数据",name:"lost"}})],1),"profile"===t.activeTabName?a("profileData"):t._e(),"active"===t.activeTabName?a("activeData"):t._e(),"asset"===t.activeTabName?a("assetData"):t._e(),"lost"===t.activeTabName?a("lostData"):t._e()],1)},et=[],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"profile-data"},[a("div",{staticClass:"group grown-data"},[a("div",{staticClass:"group-head"},[t._m(0),a("div",{staticClass:"screen"},[a("el-date-picker",{attrs:{clearable:!1,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.getOverviewData}},[t._v("查询")])],1)]),a("div",{staticClass:"group-content"},[a("div",{staticClass:"grown-data-list"},[a("el-row",{staticStyle:{width:"100%"},attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grown-data-item"},[a("div",{staticClass:"title"},[t._v("用户增长数据")]),a("totalData",{attrs:{data:t.userGrowthData}})],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grown-data-item"},[a("div",{staticClass:"title"},[t._v("爱兑分用户增长数据")]),a("totalData",{attrs:{data:t.walletUserGrowthData}})],1)])],1)],1),a("div",{staticClass:"grown-data-list"},[a("div",{staticClass:"grown-data-item"},[a("div",{staticClass:"title"},[t._v("积分用户增长数据")]),a("totalData",{attrs:{data:t.pointsUserGrowthData}})],1)])])]),a("div",{staticClass:"group ad-data"},[t._m(1),a("div",{staticClass:"group-content"},[a("totalData",{attrs:{data:t.adData}})],1)])])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-title"},[a("h1",[t._v("增长指标")]),a("span",{staticClass:"tips"},[t._v("(当天默认显示昨天数据)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-head"},[a("div",{staticClass:"group-title"},[a("h1",[t._v("广告数据")]),a("span",{staticClass:"tips"},[t._v("(当天默认显示昨天数据)")])])])}],rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"total-data",class:{horizontal:"horizontal"===t.mode}},t._l(t.data,function(e){return a("div",{key:e.name,staticClass:"total-data-item"},["horizontal"===t.mode?a("div",{staticClass:"el-icon-sort"}):t._e(),a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"value"},[a("div",{staticClass:"prefix"},[t._v("\n        "+t._s(e.prefix)+"\n      ")]),t._v("\n      "+t._s(t._f("add_comma_toThousands")(e.value))+"\n    ")]),e.link?a("div",{staticClass:"link",on:{click:function(a){return t.toDetail(e)}}},[t._v("\n      查看明细 >\n    ")]):t._e()])}),0)},it=[],st=(a("b54a"),{name:"totalData",props:{data:{type:Array,default:function(){return[]}},mode:{type:String,default:"vertical"}},data:function(){return{}},methods:{toDetail:function(t){this.$store.dispatch("setChangedAsideActiveName",t.link),this.$router.push({name:t.link,query:t.params})}}}),lt=st,ot=(a("dfcf"),Object(u["a"])(lt,rt,it,!1,null,"2528e974",null)),ct=ot.exports,ut={data:function(){return{pickerOptions:{shortcuts:[{text:"昨天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-864e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}],disabledDate:function(t){return t.getTime()>Date.now()}}}}};function pt(t){return Q({url:"/basic/overview/lost-customer-data",params:t})}function dt(t){return Q({url:"/basic/overview/active-customer-data",params:t})}function mt(t){return Q({url:"/basic/overview/property-data",params:t})}function ft(t){return Q({url:"/basic/overview/overview-data",params:t})}function ht(t){return Q({url:"basic/overview/data-indicators",params:t})}function gt(t){return Q({url:"basic/overview/order-data",params:t})}function vt(t){return Q({url:"basic/overview/goods-data",params:t})}function bt(t){return Q({url:"basic/overview/user-data",params:t})}function yt(t){return Q({url:"basic/overview/retained-data",params:t})}function Dt(t){return Q({url:"basic/overview/hsh-mall-order-detail-overview",method:"post",data:t})}function Ct(t){return Q({url:"basic/overview/hsh-data-overview?".concat(L(t)),method:"get",data:t})}function wt(t){t.t=sessionStorage.getItem("t"),t=L(t),window.open("".concat(q.backend,"/basic/overview/export-goods-data?").concat(t))}function _t(t){t.t=sessionStorage.getItem("t"),t=L(t),window.open("".concat(q.backend,"/basic/overview/hsh-mall-order-detail-overview?").concat(t))}function kt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function xt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?kt(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var St={name:"profileData",components:{totalData:ct},mixins:[ut],data:function(){var t=Date.now(),e=864e5;return{loading:!1,time:[new Date(t-e),new Date(t-e)],adTypeOptions:[{label:"曝光量UV",value:0},{label:"点击量",value:1},{label:"有效点击量",value:2}],userGrowthData:[{name:"新增用户数",value:0,link:"platformUserData",key:"addUser"}],pointsUserGrowthData:[{name:"首次获取积分用户",value:0,link:"IntegralManage",key:"firstReceive"},{name:"首次积分兑换用户",value:0,link:"IntegralManage",key:"firstPayByPointsUnionIdCount",params:{activeName:"exchangePoint"}},{name:"首次积分+现金购买用户",value:0,link:"IntegralManage",key:"firstPayByPointsAndMoneyUnionIdCount",params:{activeName:"exchangePoint"}}],walletUserGrowthData:[{name:"首次积分互换客户",value:0,link:"aiduifenUserData",key:"pointsExchange",params:{activeName:"firstExchangeData"}}],adData:[{name:"曝光量(UV)",value:0,key:"uv"},{name:"有效点击量",value:0,key:"effectiveCv"},{name:"点击量",value:0,key:"cv"}]}},mounted:function(){this.getOverviewData()},methods:{getOverviewData:function(){var t=this,e=t.time,a={};e&&(a.startAt=F(e[0],"yyyyMMdd"),a.endAt=F(e[1],"yyyyMMdd")),t.loading=!0,ft(a).then(function(e){var a=[t.adData,t.userGrowthData,t.pointsUserGrowthData,t.walletUserGrowthData],n=e.increaseData,r=xt({addUser:n.addUser},n.first,{},n.wallet,{},e.adData);a.forEach(function(t){t.forEach(function(t){var e=r[t.key]||0;t.value=e})}),t.loading=!1})}}},Tt=St,Pt=(a("ff76"),Object(u["a"])(Tt,at,nt,!1,null,"53016ace",null)),jt=Pt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"profile-data"},[a("div",{staticClass:"group grown-data"},[a("div",{staticClass:"group-head"},[t._m(0),a("div",{staticClass:"screen"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":t.pickerOptions},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.getAssetData}},[t._v("查询")])],1)]),a("div",{staticClass:"group-content"},[a("div",{staticClass:"grown-data-list"},[a("div",{staticClass:"grown-data-item"},[a("div",{staticClass:"title"},[t._v("\n            现金资产数据\n\n            "),a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.getAssetData},model:{value:t.appletId,callback:function(e){t.appletId=e},expression:"appletId"}},t._l(t.appletList,function(t,e){return a("el-option",{key:t,attrs:{label:t,value:e}})}),1)],1),a("totalData",{attrs:{data:t.cashAssetsData}})],1)]),a("div",{staticClass:"grown-data-list point-asset-data"},[a("div",{staticClass:"grown-data-item"},[a("div",{staticClass:"title"},[t._v("积分资产数据")]),a("div",{staticClass:"point-asset-data-list"},[a("totalData",{attrs:{data:t.pointsDistributionData,mode:"horizontal"}}),a("totalData",{attrs:{data:t.pointsRecoveryData,mode:"horizontal"}})],1)])])])])])},Ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-title"},[a("h1",[t._v("资产数据")]),a("span",{staticClass:"tips"},[t._v("(当天默认显示昨天数据)")])])}],Nt={name:"profileData",components:{totalData:ct},mixins:[ut],data:function(){var t=Date.now(),e=864e5;return{loading:!1,time:[new Date(t-e),new Date(t-e)],appletId:"",appletList:{},cashAssetsData:[{name:"商家联盟GMV",value:0,key:"gmv",prefix:"¥"},{name:"现金购买商品金额",value:0,key:"cash",prefix:"¥"}],pointsDistributionData:[{name:"积分发放总额",value:0,link:"IntegralAsset",key:"expenditure",prefix:"¥",params:{activeName:"Assets"}},{name:"积分发放总资产",value:0,link:"IntegralAsset",key:"expenditureAdf",prefix:"ADF",params:{activeName:"Assets"}}],pointsRecoveryData:[{name:"积分回收消耗总额",value:0,link:"IntegralAsset",key:"income",prefix:"¥",params:{activeName:"Assets"}},{name:"积分回收消耗总资产",value:0,link:"IntegralAsset",key:"incomeAdf",prefix:"ADF",params:{activeName:"Assets"}}]}},created:function(){this.getAssetData()},methods:{getAssetData:function(){var t=this,e=t.time,a={appletId:t.appletId||void 0};e&&(a.startAt=F(e[0],"yyyyMMdd"),a.endAt=F(e[1],"yyyyMMdd")),t.loading=!0,mt(a).then(function(e){t.appletList=e.appletList,t.handlerAssetData(e.data),t.loading=!1})},handlerAssetData:function(t){var e=this,a=Number(t.gmv||0),n=Number(t.cash||0),r=[e.cashAssetsData,e.pointsDistributionData,e.pointsRecoveryData];t.gmv=a/100,t.cash=n/100,r.forEach(function(e){e.forEach(function(e){var a=t[e.key]||0;e.value=a})})}}},It=Nt,Lt=(a("d213"),Object(u["a"])(It,At,Ot,!1,null,"e09a1f8a",null)),zt=Lt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"profile-data"},[a("div",{staticClass:"group active-data"},[a("div",{staticClass:"group-head"},[t._m(0),a("div",{staticClass:"screen"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":t.pickerOptions},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.getData}},[t._v("查询")])],1)]),a("div",{staticClass:"group-content"},[a("totalData",{attrs:{data:t.activeData}})],1)])])},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-title"},[a("h1",[t._v("活跃数据")]),a("span",{staticClass:"tips"},[t._v("(当天默认显示昨天数据)")])])}],Mt={name:"profileData",mixins:[ut],components:{totalData:ct},data:function(){var t=Date.now(),e=864e5;return{loading:!1,time:[new Date(t-e),new Date(t-e)],activeData:[{name:"活跃用户数",key:"activeUser",value:0,link:"platformActiveData"},{name:"活跃积分用户数",key:"activePointUser",value:0,link:"platformDigitalActiveData"},{name:"活跃客户数",key:"activeCustomer",value:0,link:"aiduifenActiveData"},{name:"活跃积分互换客户",key:"pointExchangeCustomer",value:0,link:"aiduifenActiveData",params:{activeName:"exchangeActiveData"}}]}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=t.time,a={};e&&(a.startAt=F(e[0],"yyyyMMdd"),a.endAt=F(e[1],"yyyyMMdd")),t.loading=!0,dt(a).then(function(e){var a=t.activeData;a.forEach(function(t){t.value=e[t.key]||0}),t.loading=!1})}}},$t=Mt,Ft=(a("2927"),Object(u["a"])($t,Vt,Et,!1,null,"f5281f54",null)),Ut=Ft.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"profile-data"},[a("div",{staticClass:"group grown-data"},[a("div",{staticClass:"group-head"},[t._m(0),a("div",{staticClass:"screen"},[a("el-date-picker",{attrs:{clearable:!1,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.getLostCustomeData}},[t._v("查询")])],1)]),a("div",{staticClass:"group-content"},[a("div",{staticClass:"grown-data-list"},[a("div",{staticClass:"grown-data-item"},[a("div",{staticClass:"title"},[t._v("客户有效资产流失数据图")]),a("LineChart",{attrs:{dimensions:t.dimensions,data:t.chartData}})],1)])])])])},Gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-title"},[a("h1",[t._v("流失数据")]),a("span",{staticClass:"tips"},[t._v("(当天默认显示昨天数据)")])])}],Yt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"line-chart"},[a("div",{staticClass:"chart",attrs:{id:"chart"}})])}],Ht=a("3eba");a("ef97"),a("007d"),a("627c"),a("0352"),a("d28f");var Qt,Bt,Kt={data:function(){return{chart:null}},props:{dimensions:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){return{}}}},watch:{data:{handler:function(t){this.initChart(t)},deep:!0}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.chart&&t.chart.resize()})},beforeDestroy:function(){var t=this;t.chart&&(t.chart.dispose(),t.chart=null)},methods:{initChart:function(t){for(var e,a=this,n=a.dimensions,r=[],i=[],s=1,l=n.length;s<l;s++){var o={type:"line",smooth:!0,lineStyle:{width:5}};i.push(o),r.push(n[s])}e=Ht.init(document.getElementById("chart")),e.setOption({legend:{data:r},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#BFC1C7",type:"dashed"}},textStyle:{color:"#6B6F7B",lineHeight:"26"},padding:[10,10,16,23],backgroundColor:"#fff",extraCssText:"box-shadow: 0 0 4px 1px rgba(0,0,0,0.10);",formatter:function(t){var e="";return t.forEach(function(t,a){var n=t.seriesName,r=t.marker,i=(t.color,t.data),s=t.name;0==a&&(e+=s+"<br />"),e+="".concat(r," ").concat(n," : ").concat(i[a+1]).concat(3==a?"%":"","<br /> ")}),e}},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:"#F7F7F7",type:"solid"}},axisLabel:{color:"#6B6F7B"},grid:{show:!0}},yAxis:{type:"value",axisLabel:{color:"#6B6F7B"},splitLine:{show:!0,lineStyle:{color:"#F7F7F7",type:"solid"}},axisLine:{lineStyle:{color:"#e5e5e5"}},grid:{show:!0}},series:i,dataset:{dimensions:n,source:t.source},color:["#6699FF","#836DF2","#CE61F2","#FF809A","#FF9F40","#FFCF40","#6CD99A"]}),a.chart=e}}},Jt=Kt,Wt=(a("0a09"),Object(u["a"])(Jt,Yt,Rt,!1,null,null,null)),Zt=Wt.exports,Xt={methods:{handelerHourData:function(t){for(var e=[],a=0;a<=23;a++){var n=a<=9?"0".concat(a,":00"):"".concat(a,":00"),r=[n];r=r.concat(t(n)),e.push(r)}return{source:e}},handelerDayData:function(t,e){for(var a=864e5,n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),i=Math.ceil((r-n)/a),s=[],l=0;l<=i;l++){var o=F(n+a*l,"yyyy-MM-dd"),c=[o];c=c.concat(e(o)),s.push(c)}return{source:s}}}},te={name:"lostData",mixins:[ut,Xt],components:{LineChart:Zt},data:function(){var t=Date.now(),e=864e5;return{loading:!1,time:[t-8*e,t-e],dimensions:["product","新增有效客户数量","流失有效客户数量"],chartData:{},originData:{}}},mounted:function(){this.getLostCustomeData()},methods:{random:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getLostCustomeData:function(){var t=this,e=this.time,a={};e&&(a.startAt=F(e[0],"yyyyMMdd"),a.endAt=F(e[1],"yyyyMMdd")),this.loading=!0,pt(a).then(function(e){t.originData=e,t.handlerDate(),t.loading=!1})},handlerDate:function(){var t=this;t.chartData=t.handelerDayData(t.time,t.handlerChartData)},handlerChartData:function(t){var e=this.originData[F(new Date(t),"yyyyMMdd")],a=0,n=0;return e&&(a=e.lost||0,n=e.effective||0),[n,a]}}},ee=te,ae=(a("1377"),Object(u["a"])(ee,qt,Gt,!1,null,"739b5723",null)),ne=ae.exports,re={name:"dataProfile",data:function(){return{activeTabName:"profile"}},components:{profileData:jt,assetData:zt,activeData:Ut,lostData:ne},methods:{handleClick:function(t,e){this.activeTabName=t.name}}},ie=re,se=(a("48d6"),Object(u["a"])(ie,tt,et,!1,null,null,null)),le=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-bottom":"50px"}},[a("el-tabs",{staticClass:"dataUotline_tabs",attrs:{slot:"header"},slot:"header",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"数据指标",name:"0"}}),a("el-tab-pane",{attrs:{label:"订单数据",name:"1"}}),a("el-tab-pane",{attrs:{label:"商品数据",name:"2"}}),a("el-tab-pane",{attrs:{label:"留存数据",name:"3"}}),a("el-tab-pane",{attrs:{label:"用户数据",name:"4"}})],1),a(t.componentName,{tag:"component"})],1)},ce=[],ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("Title-item",{attrs:{title:"订单数据"}}),a("Total-data",{attrs:{totalList:t.orderData}})],1),a("div",{staticClass:"container"},[a("Title-item",{attrs:{title:"关键数据",type:"search"},on:{handleData:t.search}}),a("Total-data",{attrs:{totalList:t.cruxData},scopedSlots:t._u([{key:"default",fn:function(e){return[e.scope.state?a("div",{staticClass:"percent"},[a("span",[t._v("环比增长")]),t._v(" \n          "),a("span",{style:e.scope.per>=0?t.colorRed:t.colorGreen},[t._v(t._s(t._f("symbol")(e.scope.per))+t._s(t._f("percent")(e.scope.per))+"%")])]):t._e()]}}])})],1)])},pe=[],de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data_content"},t._l(t.totalList,function(e,n){return a("div",{key:n,class:{cus:e.path},on:{click:function(a){return t.routerTo(e)}}},[a("p",{staticClass:"total_item_label"},[t._v(t._s(e.label))]),a("p",{staticClass:"total_item_val"},[t._v(t._s(e.value||0))]),t._t("default",null,{scope:e})],2)}),0)},me=[],fe={props:["totalList"],name:"TotalData",methods:{routerTo:function(t){var e=t.path;e&&this.$router.push(e)}}},he=fe,ge=(a("53b1"),Object(u["a"])(he,de,me,!1,null,"9921dd78",null)),ve=ge.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card_title_container"},[a("h3",{staticClass:"title"},[t._v(t._s(t.title))]),a("div",{staticClass:"fl"},[t._t("default"),"search"===t.type?a("Search-time",{on:{search:t.search}}):t._e(),"export"===t.type?a("el-button",{style:t.buttonStyle,attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导 出")]):t._e(),t._t("after")],2)])},ye=[],De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search_container"},[t._l(t.searchTime,function(e,n){return a("span",{key:n,class:[t.activeTime===n&&"active_time","mgl16"],on:{click:function(e){return t.selectorTime(n)}}},[t._v(t._s(e))])}),a("el-date-picker",{staticClass:"mgl16",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜 索")])],2)},Ce=[],we=a("c1df"),_e=a.n(we),ke=new Date;Qt=function(t){return ke-86400*t*1e3},Bt=_e()(Qt(1)).format("YYYYMMDD");var xe,Se,Te={name:"SearchTime",data:function(){return{time:"",params:{startAt:Bt,endAt:Bt},activeTime:0,searchTime:["昨日","最近7天","最近30天"]}},methods:{moment:function(t){return{startAt:_e()(t[0]).format("YYYYMMDD"),endAt:_e()(t[1]).format("YYYYMMDD")}},search:function(){var t=Array.isArray(this.time)&&this.time.length>=2?this.moment(this.time):this.params;this.$emit("search",t)},selectorTime:function(t){this.activeTime=t,this.time=[];var e=[1,7,30],a=[Qt(e[t]),ke],n=a[0],r=a[1];this.params=0===t?this.moment([n,n]):this.moment([n,r]),this.$emit("search",this.params)}}},Pe=Te,je=(a("3df3"),Object(u["a"])(Pe,De,Ce,!1,null,"a641056e",null)),Ae=je.exports,Oe={name:"TitleItem",props:["type","title","buttonStyle"],components:{SearchTime:Ae},data:function(){return{}},methods:{search:function(t){this.$emit("handleData",t)},exportData:function(){this.$emit("handleData")}}},Ne=Oe,Ie=(a("6e85"),Object(u["a"])(Ne,be,ye,!1,null,"e4c218d0",null)),Le=Ie.exports,ze=new Date;xe=function(t){return ze-86400*t*1e3},Se=_e()(xe(1)).format("YYYYMMDD");var Ve={name:"index",components:{TotalData:ve,TitleItem:Le},filters:{percent:function(t){return U(100*t)},symbol:function(t){return t>=0?"+":""}},data:function(){return{time:"",searchTime:["昨日","最近7天","最近30天"],params:{startAt:Se,endAt:Se},colorRed:{color:"#F26161"},colorGreen:{color:"#7BCC52"},cruxData:[{label:"首页访问pv",value:0,per:0,perKey:"rosePv",key:"homePagePv",state:!0},{label:"首页访问uv",value:0,perKey:"roseUv",per:0,key:"homePageUv",state:!0},{label:"日留存率",value:0,key:"reteRates"},{label:"已支付金额",key:"paymentTotal",value:0},{label:"回收积分总数",key:"pointsTotal",value:0}],orderData:[{label:"待发货订单",key:"waitOrderCount",value:0},{label:"退货售后订单",key:"afterSaleCount",value:0},{label:"待上架商品",key:"stayOnGoodsQuantity",value:0},{label:"已售完商品",key:"soldOutGoodsQuantity",value:0}]}},created:function(){this.getDataList(this.params)},methods:{search:function(t){this.getDataList(t)},getDataList:function(t){var e=this;ht(t).then(function(t){if(t){var a=function(t,e){var a={paymentTotal:U(t/100),reteRates:U(100*t)+"%"};return a[e]||t},n=t.orderRemind,r=t.keyData;e.orderData.forEach(function(t){t.value=n[t.key]}),e.cruxData.forEach(function(t){var e=r[t.key];t.value=a(e,t.key),t.per=r[t.perKey]})}})}}},Ee=Ve,Me=(a("8df9"),Object(u["a"])(Ee,ue,pe,!1,null,"6c77e37f",null)),$e=Me.exports,Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("Title-item",{attrs:{title:"订单数据",type:"search"},on:{handleData:t.search}}),a("div",{staticClass:"order_container"},[a("div",{staticClass:"data_content_left"},t._l(t.orderData,function(e,n){return a("div",{key:n},[a("p",{staticClass:"total_item_label"},[t._v(t._s(e.label))]),a("p",{staticClass:"total_item_val"},[t._v(t._s(e.value))])])}),0),a("div",{staticClass:"main_box"},[a("Funnel",{attrs:{dataList:t.funnelList,title:"订单转化漏斗"}})],1)])],1),a("div",{staticClass:"container"},[a("Title-item",{attrs:{title:"订单明细数据",type:"export"},on:{handleData:t.exportData}}),a("el-table",{staticClass:"mgt24",attrs:{data:t.tableData,"header-cell-style":{background:"#F2F3F7",color:"#606266"}},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),a("el-table-column",{attrs:{prop:"orderUnionIdNum",label:"下单用户数"}}),a("el-table-column",{attrs:{prop:"orderNum",label:"下单数量"}}),a("el-table-column",{attrs:{prop:"orderPayedNum",label:"支付订单数"}}),a("el-table-column",{attrs:{prop:"orderConversionRate",label:"订单转化率"}}),a("el-table-column",{attrs:{prop:"orderPayedMoney",label:"支付金额",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("price")(e.row.orderPayedMoney))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"orderPayedPoints",label:"回收积分数"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-size":20,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])},Ue=[],qe=(a("55dd"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"funnel_container"},[a("h3",[t._v(t._s(t.title))]),t._l(t.dataList,function(e,n){return a("div",{key:n,class:"funnel_item"+n},[a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"funnel_data"},[a("p",{staticClass:"funnel_data_number"},[t._v(t._s(e.value))]),a("p",[t._v("环比增长")]),a("div",{staticClass:"funnel_data_per"},[a("span",[t._v(t._s(t._f("abs")(e.per))+"%")]),a("i",{class:t.className(e.per)})])])])})],2)}),Ge=[],Ye={name:"Funnel",props:["dataList","title"],data:function(){return{}},filters:{abs:function(t){return t<0?Math.abs(t):t}},methods:{className:function(t){return t/100>=0?"el-icon-top":"el-icon-bottom down"}}},Re=Ye,He=(a("afac"),Object(u["a"])(Re,qe,Ge,!1,null,"80f21888",null)),Qe=He.exports;function Be(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function Ke(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Be(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Be(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Je,We,Ze=new Date;Je=function(t){return Ze-86400*t*1e3},We=_e()(Je(1)).format("YYYYMMDD");var Xe,ta,ea={name:"index",components:{Funnel:Qe,TitleItem:Le},data:function(){return{funnelList:[],total:0,orderData:[{label:"下单用户数",key:"orderUserNumber",value:0},{label:"支付订单数",key:"payUserNumber",value:0},{label:"订单转化率",key:"convRate",value:"0%"}],params:{page:1,startAt:We,endAt:We},tableData:[]}},methods:{sortChange:function(t){var e={sortField:t.prop,sortOrder:"ascending"===t.order?"ASC":"DESC"};Object.assign(this.params,e),this.getOrderDetail()},exportData:function(){_t(Ke({},this.params,{isExport:1}))},search:function(t){var e=Object.assign(this.params,t);this.getOrderData(e),this.getOrderDetail()},funnel:function(t){var e,a,n=function(t){return t?U(100*t):0};e=[{name:"首页访问PV",value:t.homePagePv||0,per:n(t.convRateHomePagePv)},{name:"商品详情页访问PV",value:t.goodsDetailPagePv||0,per:n(t.convRateGoodsDetailPagePv)},{name:"下单用户数",value:t.orderUserNumber||0,per:n(t.convRateOrderUser)},{name:"支付用户数",value:t.payUserNumber||0,per:n(t.convRatePayUser)}],a=function(t,e){var a=[Number(t.value),Number(e.value)],n=a[0],r=a[1];return n<r?1:n>r?-1:0},this.funnelList=e.sort(a)},handleCurrentChange:function(t){this.params.page=t,this.getOrderDetail()},getOrderData:function(t){var e=this;gt(t).then(function(t){if(t){var a=Ke({},t,{convRate:"".concat(U(100*t.convRate),"%")});e.funnel(t),e.orderData.forEach(function(t){t.value=a[t.key]})}})},getOrderDetail:function(){var t=this;Dt(this.params).then(function(e){e&&(t.tableData=e.list,t.total=e.totalCount)})}},created:function(){this.getOrderData(this.params),this.getOrderDetail()},filters:{price:function(t){return U(t/100)}}},aa=ea,na=(a("1884"),Object(u["a"])(aa,Fe,Ue,!1,null,"77eb08ca",null)),ra=na.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("Title-item",{attrs:{type:"search",title:"商品数据"},on:{handleData:t.search}}),a("Total-data",{attrs:{totalList:t.productData}})],1),a("div",{staticClass:"container"},[a("Title-item",{attrs:{type:"export",title:"商品销售排行"},on:{handleData:t.exportData}}),a("el-table",{staticClass:"mgt24",attrs:{data:t.tableData,"header-cell-style":{background:"#F2F3F7",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"pv",label:"PV"}}),a("el-table-column",{attrs:{prop:"uv",label:"UV"}}),a("el-table-column",{attrs:{prop:"pointsAmount",label:"消耗积分"}}),a("el-table-column",{attrs:{prop:"tradeAmount",label:"支付金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("price")(e.row.tradeAmount))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"buyNumber",label:"商品销售量"}}),a("el-table-column",{attrs:{label:"商品转化率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("conversion")(e.row))+"\n        ")]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-size":20,layout:"prev, pager, next","page-count":t.totalPage},on:{"current-change":t.handleCurrentChange}})],1)],1)])},sa=[],la=new Date;Xe=function(t){return la-86400*t*1e3},ta=_e()(Xe(1)).format("YYYYMMDD");var oa,ca,ua={name:"index",components:{TotalData:ve,TitleItem:Le},filters:{conversion:function(t){return t.pv?U(t.buyNumber/t.pv*100)+"%":"0%"},price:function(t){return U(t/100)}},data:function(){return{params:{page:0,startAt:ta,endAt:ta},tableData:[],totalPage:0,productData:[{key:"goodsDetailPagePv",label:"商品详情访问pv",value:0},{label:"商品详情页访问uv",key:"goodsDetailPageUv",value:0},{label:"商品销售量",key:"saleNumber",value:0}]}},methods:{search:function(t){Object.assign(this.params,t),this.getDataList()},exportData:function(){wt(this.params)},handleCurrentChange:function(t){this.params.page=t-1,this.getDataList()},getDataList:function(){var t=this;vt(this.params).then(function(e){if(e){var a=e.goodsData,n=e.saleGoodsData;t.productData.forEach(function(t){t.value=a[t.key]}),t.tableData=n.list,t.totalPage=n.totalPage}})}},created:function(){this.getDataList()}},pa=ua,da=(a("333f"),Object(u["a"])(pa,ia,sa,!1,null,"51e715f8",null)),ma=da.exports,fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Title-item",{attrs:{title:"留存数据"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-date-picker",{staticClass:"mgl16",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜 索")])],1),a("el-table",{staticClass:"mgt24",attrs:{data:t.dataList,"header-cell-style":{background:"#F2F3F7",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"time",label:"日期"}}),a("el-table-column",{attrs:{prop:"day0",label:"新增用户数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day0,t.value,"day0"))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day1",label:"1天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day1,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day2",label:"2天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day2,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day3",label:"3天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day3,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day4",label:"4天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day4,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day5",label:"5天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day5,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day6",label:"6天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day6,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day7",label:"7天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day7,t.value))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"day30",label:"30天后"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("placeholder")(e.row.day30,t.value))+"\n      ")]}}])})],1)],1)},ha=[],ga=new Date;oa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga;return e-86400*t*1e3},ca=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga;return e+86400*t*1e3};var va={name:"index",components:{TitleItem:Le},filters:{placeholder:function(t,e,a){if(e)return t||0;var n=a?"":"%";return(t||0)+n}},computed:{dataList:function(){var t=this;return this.tableDataList.map(function(e,a){var n=_e()(e.time).format("YYYYMMDD")-0,r={time:_e()(e.time).format("YYYY-MM-DD")};return t.tableData.forEach(function(t){n===t.Ymd&&0===t.byDay&&(r.day0=t.activeUserNum)}),t.tableData.forEach(function(a){var n=_e()(ca(a.byDay,e.time)).format("YYYYMMDD")-0;n===a.Ymd&&(t.value?r["day"+a.byDay]=a.activeUserNum:0!==a.byDay&&(r["day"+a.byDay]=U(a.activeUserNum/r.day0)))}),r})}},data:function(){return{tableDataList:[],time:[_e()(oa(10)),ga],total:0,value:1,params:{startAt:_e()(oa(10)).format("YYYYMMDD"),endAt:_e()(ga).format("YYYYMMDD")},options:[{label:"留存数",value:1},{label:"留存率",value:0}],tableData:[]}},created:function(){this.getTimeList(11),this.getDataList()},methods:{getTimeList:function(t,e){for(var a=[],n=0;n<t;n++)a.push({time:oa(n,e)});this.tableDataList=a.reverse()},search:function(){if(Array.isArray(this.time)&&this.time.length>=2){var t=(this.time[1]-this.time[0])/864e5;this.getTimeList(t+1,this.time[1]-0)}this.getDataList()},getDataList:function(){var t=this,e=Array.isArray(this.time)&&this.time.length>=2?this.moment(this.time):this.params;yt(e).then(function(e){e&&(t.tableData=e.list)})},moment:function(t){return{startAt:_e()(t[0]).format("YYYYMMDD"),endAt:_e()(t[1]).format("YYYYMMDD")}}}},ba=va,ya=(a("2a50"),Object(u["a"])(ba,fa,ha,!1,null,"50cd4994",null)),Da=ya.exports,Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("Total-data",{staticClass:"mgt16",attrs:{totalList:t.totalList}})],1),a("el-row",[a("el-col",{attrs:{lg:12,sm:24}},[a("div",{attrs:{id:"loop"}})]),a("el-col",{staticClass:"pdl16",attrs:{lg:12,sm:24}},[a("div",{attrs:{id:"loop1"}})]),a("el-col",{attrs:{lg:12,sm:24}},[a("div",{attrs:{id:"cake"}})]),a("el-col",{staticClass:"pdl16",attrs:{lg:12,sm:24}},[a("div",{attrs:{id:"cake1"}})])],1)],1)},wa=[],_a=a("313e"),ka=a.n(_a),xa={name:"index",components:{TotalData:ve},data:function(){return{totalList:[{label:"注册用户数",key:"channelData",value:0},{label:"用户消费次数",key:"consumeData",value:0}]}},methods:{cakeEcharts:function(t,e,a){var n=ka.a.init(document.getElementById(a)),r=Ta();r.title.text=e,r.series[0].name=e,r.series[0].data=t,n.setOption(r)},loopEcharts:function(t,e,a){var n=ka.a.init(document.getElementById(a)),r=Pa();r.title.text=e,r.series[0].data=t,r.series[0].name=e,n.setOption(r)}},created:function(){var t=this;bt().then(function(e){var a=e.channelData,n=e.consumeData,r=e.fillFormData,i=e.sexData,s=a.inviteNumber,l=a.QRCode,o=a.naturalRegistered,c=n.exchangeCouponCount,u=n.giveCouponCount,p=n.buyGoodsCount,d=n.exchangeGoodsCount,m=r.notFillFormUserNumber,f=r.fillFormUserNumber,h=i.maleNumber,g=i.femaleNumber;t.totalList.forEach(function(t){t.value=e[t.key].total}),t.cakeEcharts([{value:h,name:"男性"},{value:g,name:"女性"}],"用户男女比例数据","cake"),t.loopEcharts([{value:s,name:"游戏邀请"},{value:l,name:"大屏扫码"},{value:o,name:"自然注册"}],"用户渠道来源数据","loop"),t.cakeEcharts([{value:f,name:"填写表单用户"},{value:m,name:"未填写表单用户"}],"填写表单用户数据","cake1"),t.loopEcharts([{value:c,name:"兑换点播劵"},{value:u,name:"赠送点播劵"},{value:p,name:"购买商品"},{value:d,name:"兑换商品"}],"用户消费数据","loop1")})}},Sa=["#6699FF","#836DF2","#CE61F2","#FF809A","#FF9F40"];function Ta(){return{title:{text:"用户男女比例数据",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},color:function(t){return Sa[t.dataIndex]},series:[{type:"pie",radius:"65%",center:["50%","50%"],label:{formatter:"{b} : {c} ({d}%)"},data:[],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}function Pa(){return{title:{x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"right"},color:function(t){return Sa[t.dataIndex]},series:[{type:"pie",radius:["50%","70%"],avoidLabelOverlap:!0,label:{formatter:"{b} : {c} ({d}%)"},labelLine:{normal:{show:!0}},data:[]}]}}var ja=xa,Aa=(a("1bde"),Object(u["a"])(ja,Ca,wa,!1,null,"cf2a9366",null)),Oa=Aa.exports,Na={components:{DataIndicator:$e,OrderData:ra,RetainedData:Da,UserData:Oa,ProductData:ma},data:function(){return{activeName:"0"}},computed:{componentName:function(){var t=["DataIndicator","OrderData","ProductData","RetainedData","UserData"];return t[this.activeName]}}},Ia=Na,La=(a("47d5"),a("a44f"),Object(u["a"])(Ia,oe,ce,!1,null,"80935e3c",null)),za=La.exports,Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("Title-item",{staticClass:"mgb24 mgt8",attrs:{title:"总数据"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}}),a("el-select",{staticClass:"mgl16",attrs:{clearable:"",placeholder:"请选择端口"},model:{value:t.userSourceValue,callback:function(e){t.userSourceValue=e},expression:"userSourceValue"}},t._l(t.userSource,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),a("Total-data",{attrs:{totalList:t.totalList}})],1),a("div",{staticClass:"container"},[a("Title-item",{staticClass:"mgb24 mgt8",attrs:{title:"核心漏斗"}}),a("div",{staticClass:"funne_container",staticStyle:{"justify-content":"start"}},[a("Funnel",{staticStyle:{flex:"1"},attrs:{dataList:t.goodsFunnel,title:"兑换商品数据"}}),a("Funnel",{staticStyle:{flex:"1"},attrs:{dataList:t.couponFunnel,title:"兑换劵数据"}}),a("Funnel",{staticStyle:{flex:"1"},attrs:{dataList:t.friendFunnel,title:"邀请好友数据"}})],1)],1),t._l(t.lineList,function(t){return a("div",{key:t.id,staticClass:"container"},[a("Title-item",{staticClass:"mgb24 mgt8",attrs:{title:t.name}}),a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:t.id}})],1)}),a("div",{staticClass:"container"},[a("Title-item",{staticClass:"mgb24 mgt16",attrs:{title:"兑换排名"}}),a("div",{staticClass:"funne_container"},[a("Conversion",{attrs:{TotalData:t.buyTotalData,title:"访客-兑换商品转化率",dataList:t.goodsTableList}}),a("Conversion",{staticClass:"mgl16",attrs:{TotalData:t.couponlData,title:"访客-兑换劵转化率",dataList:t.couponlDataTableList}})],1)],1)],2)},Ea=[],Ma=(a("5df3"),a("1c4c"),a("75fc")),$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"conversion_item"},[a("p",{staticClass:"blue"},[t._v(t._s(t.title))]),a("div",{staticClass:"conversion_total"},[a("el-progress",{attrs:{type:"circle",percentage:t.percentage}}),a("div",{staticClass:"conversion_total_item"},[a("div",[t._v("\n        访客人数\n        "),a("p",[t._v(t._s(t.TotalData.goodsDetailNumber||0))])]),a("div",{staticStyle:{"margin-top":"20px"}},[t._v("\n        兑换件数\n        "),a("p",[t._v(t._s(t.TotalData.totalNum||0))])])])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"16px"},attrs:{data:t.dataList}},[a("el-table-column",{attrs:{prop:"name",label:"商品",width:"300"}}),a("el-table-column",{attrs:{prop:"visitorNumber",label:"访问数"}}),a("el-table-column",{attrs:{prop:"totalNum",label:"兑换数"}})],1)],1)},Fa=[],Ua={name:"Conversion",props:["TotalData","dataList","title"],data:function(){return{}},computed:{percentage:function(){if(this.TotalData.goodsDetailNumber-0===0)return 0;var t=this.TotalData.totalNum/this.TotalData.goodsDetailNumber||0,e=100*U(t,2);return U(e)>100?100:U(e)}}},qa=Ua,Ga=(a("444d"),Object(u["a"])(qa,$a,Fa,!1,null,"21e1e60b",null)),Ya=Ga.exports,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"funnel_container"},[a("h3",[t._v(t._s(t.title))]),t._l(t.dataList,function(e,n){return a("div",{key:n,class:"funnel_item"+n},[a("span",[t._v(t._s(e.name))]),e.accreditName||e.noAccreditName?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"left-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n        "+t._s(e.accreditName)+" : "+t._s(e.accreditVal)+" "),a("br"),a("br"),t._v("\n        "+t._s(e.noAccreditName)+" : "+t._s(e.noAccreditVal)+"\n      ")]),a("div")]):t._e(),a("div",{staticClass:"funnel_data"},[a("p",{staticClass:"funnel_data_number"},[t._v(t._s(e.value||0))]),a("p",{staticClass:"f12"},[t._v("环比增长")]),a("div",{staticClass:"funnel_data_per"},[a("span",[t._v(t._s(t._f("abs")(e.per))+"%")]),a("i",{class:t.className(e.per)})])])],1)})],2)},Ha=[],Qa={name:"Funnel",props:["dataList","title"],data:function(){return{}},filters:{abs:function(t){var e=t<0?Math.abs(t):t;return U(100*e)}},methods:{className:function(t){return t>=0?"el-icon-top":"el-icon-bottom down"}}},Ba=Qa,Ka=(a("1235"),Object(u["a"])(Ba,Ra,Ha,!1,null,"11161608",null)),Ja=Ka.exports;function Wa(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function Za(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Wa(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wa(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function Xa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=function(t,e){return{accreditName:"已授权用户",noAccreditName:"未授权用户",accreditVal:t,noAccreditVal:e}};return{goodsFunnel:[Za({},a(t.goodsDetailVisitorAuthNumber||0,e-t.goodsDetailVisitorAuthNumber||0),{per:t.goodsDetailVisitorNumberPre,value:t.goodsDetailVisitorNumber,name:"访问商品详情页人数"}),Za({},a(t.indexVisitorAuthNumber||0,e-t.indexVisitorAuthNumber||0),{per:t.indexVisitorNumberPre,value:t.indexVisitorNumber,name:"首次访问用户数"}),{value:t.clickUseGoldenNumber,name:"点击跳转拼多多人数",per:t.clickUseGoldenNumberPre},{value:t.tradeSuccessNumber,per:t.tradeSuccessNumberPre,name:"交易成功"}],couponFunnel:[{value:t.cardIndexVisitorNumber,name:"首次访问用户数",per:t.cardIndexVisitorNumberPre},{value:t.clickUseCouponNumber,name:"点击使用人数",per:t.clickUseCouponNumberPre},{value:t.clickCardNumber,name:"点翻牌人数",per:t.clickCardNumberPre},{value:t.cardCouponNumber,name:"兑换劵人数",per:t.cardCouponNumberPre}],friendFunnel:[{value:t.stealNumber+t.fetchNumber,name:"领取金豆人数/偷金豆人数",per:t.stealFetchPre},{value:t.inviteNumber,name:"点击邀请分享到微信人数",per:t.inviteNumberPre},{value:t.beInvitedNumber,name:"被邀请人进来数",per:t.beInvitedNumberPre},{value:t.goldenIndexVisitorNumber,name:"首次访问用户数",per:t.goldenIndexVisitorNumberPre}]}}function tn(){return[{label:"首页访问PV",key:"homePagePv",value:""},{label:"访问总人数",key:"indexVisitorNumber",value:""},{label:"积分用户数",key:"userNumber",value:""},{label:"购买商品人数",key:"orderNumber",value:""},{label:"兑换商品人数",key:"couponNumber",value:""},{label:"发金豆数",key:"expenditure",value:""},{label:"回收金豆数",key:"income",value:""}]}var en={components:{Conversion:Ya,Funnel:Ja,TitleItem:Le,TotalData:ve},data:function(){return{buyTotalData:{},couponlData:{},friendFunnel:[],goodsFunnel:[],couponFunnel:[],RETURN_TYPE:"HOUR",goodsTableList:[],lineList:[{id:"main_visit",name:"访问分析"},{id:"main_beans",name:"金豆数据分析"},{id:"main_user",name:"用户积分分布"}],couponlDataTableList:[],daterange:[new Date,new Date],totalList:tn(),userSourceValue:"",userSource:[{label:"H5",value:"1"},{label:"小程序",value:"2"}]}},methods:{funnel:function(t){var e=function(t,e){var a=[Number(t.value),Number(e.value)],n=a[0],r=a[1];return n<r?1:n>r?-1:0};return t.sort(e)},search:function(){var t=this.daterange;this.getHshDataOverview(t,this.userSourceValue)},getHshDataOverview:function(t,e){var a=this,n=t&&t[0]?_e()(t[0]).format("YYYYMMDD"):"",r=t&&t[1]?_e()(t[1]).format("YYYYMMDD"):"",i=n!==r?"DAY":"HOUR",s={startAt:n,endAt:r,returnType:i,pageType:e};this.RETURN_TYPE=i,s.pageType||delete s.pageType,Ct(s).then(function(t){if(t){var e=t.totalData,n=t.scope,r=t.funnelData,s=t.overAnalyData,l=t.integralAnalyGrantData,o=t.integralAnalyRecycleData,c=t.integralDistribution,u=Xa(r,e[a.totalList[0].key]),p=u.goodsFunnel,d=u.couponFunnel,m=u.friendFunnel;a.totalList.forEach(function(t){t.value=e[t.key]}),a.goodsFunnel=a.funnel(p),a.couponFunnel=a.funnel(d),a.friendFunnel=a.funnel(m),a.accessAnalyze(s,i),a.beansAnalyze(l,o,i),a.userIntegral(n,c),a.footerData(t)}})},beansAnalyze:function(t,e,a){var n=[an(),this.getIntegralData(t,a),this.getIntegralData(e,a),"HOUR"===a?this.getHours():this.getDay()],r=n[0],i=n[1],s=n[2],l=n[3],o=[this.initData(i,l),this.initData(s,l)],c=o[0],u=o[1];r.xAxis[0].data=l,r.series=this.series({name:"发金豆数",data:c},{name:"回收金豆数",data:u}),r.legend.data=["发金豆数","回收金豆数"],ka.a.init(document.getElementById("main_beans")).setOption(r)},accessAnalyze:function(t,e){var a=["HOUR"===e?this.getHours():this.getDay(),an(),this.getLineChartData(t,1,e),null],n=a[0],r=a[1],i=a[2],s=a[3];r.xAxis[0].data=n;var l=[this.initData(i,n),this.getLineChartData(t,2,e)],o=l[0],c=l[1];s=this.initData(c,n),r.series=this.series({name:"访问人数",data:o},{name:"积分用户数",data:s}),r.legend.data=["访问人数","积分用户数"],ka.a.init(document.getElementById("main_visit")).setOption(r)},userIntegral:function(t,e){var a,n,r,i=nn();a=Object.keys(t).map(function(e){return"".concat(t[e].min,"-").concat(t[e].max||"∞")}),n=Math.max.apply(Math,Object(Ma["a"])(e.map(function(t){return t._id-0}))),r=this.initArray(n),e.forEach(function(t){r[t._id-1]=t.userNumber}),i.xAxis[0].data=a,i.series[0].data=r,ka.a.init(document.getElementById("main_user")).setOption(i)},footerData:function(t){var e=t.buyTotalData,a=t.entityData,n=t.couponsData,r=[e.filter(function(t){return 1===t._id})[0],e.filter(function(t){return 3===t._id})[0]],i=r[0],s=r[1];this.goodsTableList=a,this.buyTotalData=i||{},this.couponlData=s||{},this.couponlDataTableList=n},mapData:function(t,e,a){var n=t.time+"000"-0,r=_e()(n).format("HH:mm");return{val:t[e],date:t.time,time:"HOUR"===a?r:_e()(n).format("YYYY-MM-DD")}},initArray:function(t){for(var e=[],a=0;a<t;a++)e.push(0);return e},initData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(!t.length)return[];var a=this.getArrLength(t,e),n=this.initArray(a);return t.forEach(function(t){var a=e.indexOf(t.time);n[a]=t.val}),n},getLineChartData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DAY";return e.filter(function(t){return t.type===a}).map(function(e){return t.mapData(e,"docCount",n)})},getIntegralData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DAY";return e.length?e.map(function(e){return t.mapData(e,"goldenSum",a)}):[]},getArrLength:function(t,e){if("DAY"===this.RETURN_TYPE)return this.GET_DAY().DAY+1;var a=String(Math.max.apply(Math,Object(Ma["a"])(t.map(function(t){return Number(t.date)})))),n=t.filter(function(t){return t.date===a})[0];return e.indexOf(n.time)},series:function(){var t=Array.from(arguments);return t.map(function(t){return{name:t.name,type:"line",smooth:!0,data:t.data}})},getHours:function(){for(var t=[],e=0;e<24;e++){var a=new Date("2019/01/01 00:00:00").getTime()+60*e*60*1e3;t.push(_e()(a).format("HH:mm"))}return t},GET_DAY:function(){var t=this.daterange[0]-0,e=this.daterange[1]-0,a=864e5,n=(e-t)/a;return{DAY:n,start:t,end:e,oneDay:a}},getDay:function(){if(Array.isArray(this.daterange)&&this.daterange.length>=2){for(var t=[[],this.GET_DAY()],e=t[0],a=t[1],n=a.DAY,r=a.start,i=a.oneDay,s=0;s<=n;s++)e.push(_e()(r+i*s).format("YYYY-MM-DD"));return e}}},mounted:function(){this.getHshDataOverview(this.daterange)}};function an(){return{tooltip:{trigger:"axis"},dataZoom:[{show:!0,realtime:!0,start:0,end:100}],legend:{data:[]},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:[]}],yAxis:{type:"value"},color:["#6699FF","#836DF2","#CE61F2"]}}function nn(){return{color:["#6699FF","#836DF2"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"分布用户数",data:[],barWidth:"50%",type:"bar"}]}}var rn=en,sn=(a("5da2"),Object(u["a"])(rn,Va,Ea,!1,null,"cb129590",null)),ln=sn.exports,on=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},cn=[],un={name:"platform-user-data",components:{},data:function(){return{}}},pn=un,dn=(a("e456"),Object(u["a"])(pn,on,cn,!1,null,"796c2e5a",null)),mn=dn.exports,fn={path:"",component:mn,children:[{path:"",name:"totalDataProfile",component:le},{path:"dataProfile-juyiProfile",name:"juyiProfile",component:za},{path:"dataProfile-hshProfile",name:"hshProfile",component:ln}]},hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"platform-user-data-wrap"},[a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"ops-wrap inline-wrap"},[a("h1",{staticClass:"title"},[t._v("新增数据")]),a("el-select",{staticClass:"select-wrap first-select",attrs:{placeholder:"请选择平台"},on:{change:t.platformSelect},model:{value:t.platformTypeValue,callback:function(e){t.platformTypeValue=e},expression:"platformTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部平台"}}),t._l(t.platformList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择筛选时间"},on:{change:t.timeTypeSelect},model:{value:t.timeTypeValue,callback:function(e){t.timeTypeValue=e},expression:"timeTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部"}}),t._l(t.timeTypeList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择用户来源"},on:{change:t.regTypeSelect},model:{value:t.regTypeValue,callback:function(e){t.regTypeValue=e},expression:"regTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部用户来源"}}),t._l(t.regTypeList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-date-picker",{staticClass:"picker-wrap",attrs:{disabled:""==t.timeTypeValue,type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyyMMdd"},on:{change:t.timeDataSelect},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}}),a("el-input",{staticClass:"input-wrap",attrs:{placeholder:"请输入用户手机号、昵称进行搜索","prefix-icon":"el-icon-search"},model:{value:t.inputSearchValue,callback:function(e){t.inputSearchValue=e},expression:"inputSearchValue"}}),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.getListData}},[t._v("查询")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"user-num-wrap"},[a("h2",{staticClass:"num-title"},[t._v("新增用户数")]),a("p",[t._v(t._s(t.totalCount))])])]),a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("用户列表(当天默认显示昨日数据)")]),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{align:"center",prop:"unionId",label:"UnionID"}}),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"用户昵称"}}),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号码"}}),a("el-table-column",{attrs:{align:"center",label:"平台"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.platformList[e.row.appletId])+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"用户类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.phone?"已注册":"未注册")+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"授权登录时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.regTime&&t.formatTime(e.row.regTime))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"注册时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.getPhoneTime&&t.formatTime(e.row.getPhoneTime))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"首次进入平台时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.enterAppletTime&&t.formatTime(e.row.enterAppletTime))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"用户来源"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.regTypeList[String(e.row.source)])+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.showUserDetail(e.row)}}},[t._v("查看明细")])]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalPage<=1,"current-page":t.page,"page-size":t.pageSize,"page-count":t.totalPage,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},gn=[];function vn(t){return Q({url:"/user/user/query-user-list",params:t})}function bn(t){t.t=sessionStorage.getItem("t")||"",window.open("".concat(q.backend,"/user/user/export-user-list?").concat(j.a.stringify(t)),"_blank")}function yn(t){return Q({url:"/user/user/query-user-detail",params:t})}function Dn(t){return Q({url:"/user/user/query-effective-user-list",params:t})}function Cn(t){return Q({url:"/user/user/query-point-effective-user-list",params:t})}function wn(t){return Q({url:"/user/user/query-user-point-detail",params:t})}function _n(t,e){var a="";switch(e.t=sessionStorage.getItem("t")||"",t){case"platformActiveData":a="".concat(q.backend,"/user/user/query-effective-user-list?");break;case"platformDigitalActiveData":a="".concat(q.backend,"/user/user/query-point-effective-user-list?");break;case"platformUserDataDetail":a="".concat(q.backend,"/user/user/query-user-point-detail?");break;default:throw new Error("exportDataDefault需要配置导出类型")}window.open("".concat(a).concat(j.a.stringify(e)),"_blank")}var kn={name:"platform-user-data",components:{},data:function(){return{isPost:!1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},platformTypeValue:"",platformList:{},timeTypeValue:"2",timeTypeList:{},regTypeValue:"",regTypeList:{},timeListValue:[],inputSearchValue:"",totalCount:0,pageSize:20,totalPage:1,page:0,tableDataList:[]}},created:function(){var t=this,e=new Date((new Date).setDate((new Date).getDate()-1)),a=F(e,"yyyyMMdd");t.timeListValue=[a,a],t.getListData()},methods:{getListData:function(){var t=this,e={appletId:t.platformTypeValue,timeType:t.timeTypeValue,registerType:t.regTypeValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",keyword:t.inputSearchValue,pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){vn(e).then(function(e){t.isPost=!1,t.platformList=e.appletList,t.timeTypeList=e.timeType,t.regTypeList=e.registerType,t.tableDataList=e.userList.list,t.page=Number(e.userList.page),t.totalCount=e.userList.totalCount,t.pageSize=Number(e.userList.pageSize),t.totalPage=e.userList.totalPage,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.platformTypeValue,timeType:t.timeTypeValue,registerType:t.regTypeValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",keyword:t.inputSearchValue,pageSize:t.pageSize,page:t.page};bn(e)},platformSelect:function(){this.getListData()},timeTypeSelect:function(t){t||(this.timeListValue=[]),this.getListData()},regTypeSelect:function(){this.getListData()},formatTime:function(t){return F(1e3*t,"yyyy-MM-dd hh:mm:ss")},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t-1,e.getListData()},timeDataSelect:function(t){var e=this;e.timeListValue=t,e.getListData()},showUserDetail:function(t){var e=this,a=JSON.parse(JSON.stringify(t));a.paltformType=e.platformList[a.appletId]||"",a.registerTime=F(a.getPhoneTime)||"",sessionStorage.setItem("userManageDetail",JSON.stringify(a)),e.$router.push({name:"platformUserDataDetail"})}}},xn=kn,Sn=(a("576f"),a("ce4c"),Object(u["a"])(xn,hn,gn,!1,null,"30c1c502",null)),Tn=Sn.exports,Pn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-detail-info-wrap"},[a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("用户数据-用户详情")]),a("div",{staticClass:"detail-info-wrap"},[t.userDetailInfo.avatar?a("img",{staticClass:"avator",attrs:{src:t.userDetailInfo.avatar,alt:"用户图像Logo"}}):t._e(),a("div",{staticClass:"user-info"},[a("p",{staticClass:"info"},[t._v("UnionID: "+t._s(t.userDetailInfo.unionId))]),a("p",{staticClass:"info"},[t._v("用户昵称: "+t._s(t.userDetailInfo.nickName))]),a("p",{staticClass:"info"},[a("span",[t._v("注册时间: "+t._s(t.userDetailInfo.registerTime))]),a("span",[t._v("手机号码: "+t._s(t.userDetailInfo.phone||""))]),a("span",[t._v("平台: "+t._s(t.userDetailInfo.paltformType))])])])])]),a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("积分资产")]),a("div",{staticClass:"digital-info-wrap"},[a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("米粒")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.pointsAssert.riceAmount))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("ADF数量")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.pointsAssert.adfAmount))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("GBT数量")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.pointsAssert.gbtAmount))])])])]),a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("现金流资产")]),a("div",{staticClass:"digital-info-wrap"},[a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("已支付金额")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.cashFlowAssets.havePaid))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("提现金额")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.cashFlowAssets.withdrawAmount))])])])])])},jn=[],An={name:"platform-user-detail",components:{},data:function(){return{pointsAssert:{adfAmount:0,gbtAmount:0,riceAmount:0},cashFlowAssets:{havePaid:0,withdrawAmount:0},userDetailInfo:{}}},created:function(){var t=this;t.userDetailInfo=JSON.parse(sessionStorage.getItem("userManageDetail")),t.getDetailData()},destroyed:function(){sessionStorage.getItem("userManageDetail")&&sessionStorage.removeItem("userManageDetail")},methods:{getDetailData:function(){var t=this,e={appletId:t.userDetailInfo.appletId,unionId:t.userDetailInfo.unionId};return new Promise(function(a,n){yn(e).then(function(e){t.pointsAssert=e.pointsAssert,t.cashFlowAssets=e.cashFlowAssets})})}}},On=An,Nn=(a("c5d6"),Object(u["a"])(On,Pn,jn,!1,null,"bb121bb0",null)),In=Nn.exports,Ln=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plaform-active-data-wrap"},[a("el-tabs",{staticClass:"admin-header",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{staticClass:"tab-item",attrs:{label:"用户活跃数据",name:"platformActiveData"}}),a("el-tab-pane",{staticClass:"tab-item",attrs:{label:"积分用户活跃数据",name:"platformDigitalActiveData"}})],1),a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"ops-wrap"},[a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择平台"},on:{change:t.platformSelect},model:{value:t.platformTypeValue,callback:function(e){t.platformTypeValue=e},expression:"platformTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部平台"}}),t._l(t.platformList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择用户类型"},on:{change:t.userTypeSelect},model:{value:t.userTypeValue,callback:function(e){t.userTypeValue=e},expression:"userTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部用户来源"}}),t._l(t.userTypeList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-date-picker",{staticClass:"picker-wrap",attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyyMMdd"},on:{change:t.timeDataSelect},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}}),a("el-input",{staticClass:"input-wrap",attrs:{placeholder:"请输入用户手机号、昵称进行搜索","prefix-icon":"el-icon-search"},model:{value:t.inputSearchValue,callback:function(e){t.inputSearchValue=e},expression:"inputSearchValue"}}),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.getListData}},[t._v("查询")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"user-num-wrap"},[a("h2",{staticClass:"num-title"},[t._v("活跃用户数")]),a("p",[t._v(t._s(t.effectiveUserTotal))])])]),a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("用户列表(当天默认显示昨日数据)")]),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{align:"center",prop:"lastLoginTime",label:"最近登录时间"}}),a("el-table-column",{attrs:{align:"center",prop:"regTime",label:"注册时间"}}),a("el-table-column",{attrs:{align:"center",prop:"unionId",label:"UnionID"}}),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"用户昵称"}}),a("el-table-column",{attrs:{align:"center",label:"平台"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.platformList[e.row.appletId])+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号码"}}),a("el-table-column",{attrs:{align:"center",label:"用户类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s("2"==e.row.isReg?"已注册":"未注册")+"\n        ")]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},zn=[],Vn={name:"platform-active-data",components:{},data:function(){return{activeTab:"platformActiveData",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},platformTypeValue:"",platformList:{1:"很实惠",2:"聚驿优品"},userTypeValue:"",userTypeList:{1:"未注册用户",2:"注册用户"},timeListValue:[],inputSearchValue:"",totalCount:0,pageSize:20,effectiveUserTotal:0,tableDataList:[]}},created:function(){var t=this,e=new Date((new Date).setDate((new Date).getDate()-1)),a=F(e,"yyyyMMdd");t.timeListValue=[a,a],t.getListData()},watch:{activeTab:function(t){this.$router.push({name:t})}},methods:{getListData:function(){var t=this,e={appletId:t.platformTypeValue,isReg:t.userTypeValue,keyword:t.inputSearchValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){Dn(e).then(function(e){t.tableDataList=e.list,t.effectiveUserTotal=e.effectiveUserTotal,t.pageSize=e.pageSize,t.totalCount=e.totalCount,t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.platformTypeValue,isReg:t.userTypeValue,keyword:t.inputSearchValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page,isExport:1};_n("platformActiveData",e)},userTypeSelect:function(){this.getListData()},platformSelect:function(){this.getListData()},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t-1,e.getListData()},timeDataSelect:function(t){var e=this;e.timeListValue=t,e.getListData()}}},En=Vn,Mn=(a("88b4"),a("71dd"),Object(u["a"])(En,Ln,zn,!1,null,"a0eea800",null)),$n=Mn.exports,Fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plaform-active-data-wrap"},[a("el-tabs",{staticClass:"admin-header",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{staticClass:"tab-item",attrs:{label:"用户活跃数据",name:"platformActiveData"}}),a("el-tab-pane",{staticClass:"tab-item",attrs:{label:"积分用户活跃数据",name:"platformDigitalActiveData"}})],1),a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"ops-wrap"},[a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择平台"},on:{change:t.platformSelect},model:{value:t.platformTypeValue,callback:function(e){t.platformTypeValue=e},expression:"platformTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部平台"}}),t._l(t.platformList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"最近使用时间"},on:{change:t.timeTypeSelect},model:{value:t.timeTypeValue,callback:function(e){t.timeTypeValue=e},expression:"timeTypeValue"}},t._l(t.timeTypeList,function(t){return a("el-option",{key:t.name,attrs:{value:t.value,label:t.name}})}),1),a("el-date-picker",{staticClass:"picker-wrap",attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyyMMdd"},on:{change:t.timeDataSelect},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}}),a("el-input",{staticClass:"input-wrap",attrs:{placeholder:"请输入用户手机号、昵称进行搜索","prefix-icon":"el-icon-search"},model:{value:t.inputSearchValue,callback:function(e){t.inputSearchValue=e},expression:"inputSearchValue"}}),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.getListData}},[t._v("查询")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"user-num-wrap"},[a("h2",{staticClass:"num-title"},[t._v("活跃积分用户数")]),a("p",[t._v(t._s(t.pointEffectiveUserTotal))])])]),a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("用户列表(当天默认显示昨日数据)")]),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{align:"center",prop:"employTime",label:"最近使用时间"}}),a("el-table-column",{attrs:{align:"center",prop:"unionId",label:"UnionID"}}),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"用户昵称"}}),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号码"}}),a("el-table-column",{attrs:{align:"center",label:"平台"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.platformList[e.row.appletId])+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"inIntegral",label:"获得积分"}}),a("el-table-column",{attrs:{align:"center",prop:"outIntegral",label:"消耗积分"}}),a("el-table-column",{attrs:{align:"center",prop:"balance",label:"积分余额"}}),a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1==e.row.pointType?"金豆":2==e.row.pointType?"米粒":e.row.pointType)+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.showUserDetail(e.row)}}},[t._v("查看明细")])]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},Un=[],qn={name:"platform-active-data",components:{},data:function(){return{activeTab:"platformDigitalActiveData",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},platformTypeValue:"",platformList:{1:"很实惠",2:"聚驿优品"},timeTypeValue:"employTime",timeTypeList:[{name:"最近使用时间",value:"employTime"},{name:"统计时间",value:""}],timeListValue:[],inputSearchValue:"",totalCount:0,pageSize:20,pointEffectiveUserTotal:0,tableDataList:[]}},created:function(){var t=this,e=new Date((new Date).setDate((new Date).getDate()-1)),a=F(e,"yyyyMMdd");t.timeListValue=[a,a],t.getListData()},watch:{activeTab:function(t){this.$router.push({name:t})}},methods:{getListData:function(){var t=this,e={appletId:t.platformTypeValue,timeFilter:t.timeTypeValue,searchWord:t.inputSearchValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){Cn(e).then(function(e){t.tableDataList=e.list,t.pointEffectiveUserTotal=e.pointEffectiveUserTotal,t.pageSize=e.pageSize,t.totalCount=e.totalCount,t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.platformTypeValue,timeFilter:t.timeTypeValue,searchWord:t.inputSearchValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page,isExport:1};_n("platformDigitalActiveData",e)},platformSelect:function(){this.getListData()},timeTypeSelect:function(){this.getListData()},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t-1,e.getListData()},timeDataSelect:function(t){var e=this;e.timeListValue=t,e.getListData()},showUserDetail:function(t){var e=this;e.$router.push({name:"platformUserDigitalDetail",query:{unionId:t.unionId,username:t.nickName}})}}},Gn=qn,Yn=(a("6ea7"),a("c94f"),Object(u["a"])(Gn,Fn,Un,!1,null,"441c4c62",null)),Rn=Yn.exports,Hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"digit-detail-info-wrap"},[a("div",{staticClass:"section-wrap"},[a("h1",{staticClass:"title"},[t._v("用户积分明细")]),a("div",{staticClass:"ops-wrap"},[a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择平台"},on:{change:t.platformSelect},model:{value:t.platformTypeValue,callback:function(e){t.platformTypeValue=e},expression:"platformTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部平台"}}),t._l(t.platformList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("span",{staticClass:"username"},[t._v("用户昵称: "+t._s(t.detailInfo.username))]),a("el-button",{staticClass:"ops-btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{align:"center",prop:"employTime",label:"日期"}}),a("el-table-column",{attrs:{align:"center",prop:"sourceName",label:"类型"}}),a("el-table-column",{attrs:{align:"center",prop:"pointValue",label:"积分"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1==e.row.addOrReduce?"+":"-")+t._s(e.row.pointValue)+"\n        ")]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},Qn=[],Bn={name:"platform-user-digital-detail",components:{},data:function(){return{tableDataList:[],detailInfo:{unionId:"",username:""},platformTypeValue:"",platformList:{1:"很实惠",2:"聚驿优品"},totalCount:0,pageSize:20,totalPage:1,page:0}},created:function(){var t=this;t.detailInfo=t.$route.query,t.getListData()},methods:{getListData:function(){var t=this,e={appletId:t.platformTypeValue,unionId:t.detailInfo.unionId,page:t.page,pageSize:t.pageSize};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){wn(e).then(function(e){t.tableDataList=e.list,t.totalCount=e.userList.totalCount,t.pageSize=Number(e.userList.pageSize),t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.platformTypeValue,unionId:t.detailInfo.unionId,page:t.page,pageSize:t.pageSize,isExport:1};_n("platformUserDataDetail",e)},platformSelect:function(){this.getListData()},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t-1,e.getListData()},timeDataSelect:function(t){var e=this;e.timeListValue=t,e.getListData()}}},Kn=Bn,Jn=(a("c0ef"),Object(u["a"])(Kn,Hn,Qn,!1,null,"2237125a",null)),Wn=Jn.exports,Zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},Xn=[],tr={name:"platform-user-data",components:{},data:function(){return{}}},er=tr,ar=Object(u["a"])(er,Zn,Xn,!1,null,"18e37392",null),nr=ar.exports,rr={path:"/platform-user-manage",redirect:{name:"platformUserData"},component:nr,children:[{path:"platform-user-data",name:"platformUserData",component:Tn},{path:"platform-active-data",name:"platformActiveData",component:$n},{path:"platform-digittal-active-detail",name:"platformDigitalActiveData",component:Rn},{path:"platform-user-data-detail",name:"platformUserDataDetail",component:In},{path:"platform-user-digital-detail",name:"platformUserDigitalDetail",component:Wn}]},ir=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},sr=[],lr={name:"integral-active-manage",components:{},data:function(){return{}}},or=lr,cr=Object(u["a"])(or,ir,sr,!1,null,"260a436c",null),ur=cr.exports,pr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invite-send-points-wrap"},[a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"ops-wrap"},[a("h1",{staticClass:"title"},[t._v("邀请送积分")]),a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择平台"},on:{change:t.platformSelect},model:{value:t.platformTypeValue,callback:function(e){t.platformTypeValue=e},expression:"platformTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部平台"}}),t._l(t.platformList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-date-picker",{staticClass:"picker-wrap",attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyyMMdd"},on:{change:t.timeDataSelect},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}}),a("el-button",{attrs:{type:"primary"}},[t._v("查询")])],1),a("h2",{staticClass:"seconde-title"},[t._v("活动数据")]),a("div",{staticClass:"digital-info-wrap"},[a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("邀请活动首页访问人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.visitorNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("邀请人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.inviteNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("邀请金豆奖励")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.inviteAward))])])]),a("div",{staticClass:"digital-info-wrap"},[a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("领取积分人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.fetchGoldenNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("领取积分数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.fetchGoldenCount))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("偷取积分人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.stealGoldenNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("偷取积分数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.stealGoldenCount))])])])]),a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"title-wrap"},[a("h1",{staticClass:"title"},[t._v("用户列表")]),a("el-button",{staticClass:"title-btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{prop:"regTime",align:"center",label:"注册时间"}}),a("el-table-column",{attrs:{align:"center",prop:"unionId",label:"UnionID"}}),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"用户昵称"}}),a("el-table-column",{attrs:{align:"center",label:"领取积分数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.fetchGoldenCount>0?"+"+e.row.fetchGoldenCount:0)+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"偷取积分数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.stealGoldenCount>0?"+"+e.row.stealGoldenCount:0)+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"inviteCount",label:"邀请次数"}}),a("el-table-column",{attrs:{align:"center",prop:"inviteNumber",label:"成功邀请人数"}}),a("el-table-column",{attrs:{align:"center",prop:"inviteAward",label:"分享积分奖励"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},dr=[];function mr(t){return Q({url:"/user/user/golden-data",params:t})}function fr(t){return Q({url:"/user/user/invite-user-data",params:t})}function hr(t){return Q({url:"/user/user/card-data",params:t})}function gr(t){return Q({url:"/user/user/query-coupon-draw",params:t})}function vr(t,e){var a="";switch(e.t=sessionStorage.getItem("t")||"",t){case"inviteSendPoints":a="".concat(q.backend,"/user/user/golden-data?");break;case"inviteSendDetail":a="".concat(q.backend,"/user/user/invite-user-data?");break;case"turnCardExchangeData":a="".concat(q.backend,"/user/user/card-data?");break;case"exchangeDataDetail":a="".concat(q.backend,"/user/user/query-coupon-draw?");break;default:throw new Error("exportDataDefault需要配置导出类型")}window.open("".concat(a).concat(j.a.stringify(e)),"_blank")}var br={name:"invite-send-points",components:{},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},platformTypeValue:"",platformList:{1:"很实惠",2:"聚驿优品"},isPost:!1,detailInfo:{visitorNumber:0,inviteNumber:0,inviteAward:0,fetchGoldenNumber:0,fetchGoldenCount:0,stealGoldenNumber:0,stealGoldenCount:0},timeListValue:[],tableDataList:[],totalCount:0,pageSize:20,page:1}},created:function(){var t=this;t.getListData()},methods:{getListData:function(){var t=this,e={appletId:t.platformTypeValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){mr(e).then(function(e){t.detailInfo={visitorNumber:e.visitorNumber,inviteNumber:e.inviteNumber,inviteAward:e.inviteAward,fetchGoldenNumber:e.fetchGoldenNumber,fetchGoldenCount:e.fetchGoldenCount,stealGoldenNumber:e.stealGoldenNumber,stealGoldenCount:e.stealGoldenCount},t.tableDataList=e.list,t.totalCount=e.totalCount,t.pageSize=Number(e.pageSize),t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.platformTypeValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page,isExport:1};vr("inviteSendPoints",e)},platformSelect:function(){this.getListData()},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t,e.getListData()},timeDataSelect:function(t){var e=this;e.timeListValue=t,e.getListData()},showDetail:function(t){this.$router.push({name:"inviteSendDetail",query:{nickName:t.nickName,unionId:t.unionId,appletId:this.platformTypeValue,platformType:this.platformList[this.platformTypeValue]||"全部"}})}}},yr=br,Dr=(a("49d6"),Object(u["a"])(yr,pr,dr,!1,null,"58f9b105",null)),Cr=Dr.exports,wr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"turn-card-exchange-data-wrap"},[a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"ops-wrap"},[a("h1",{staticClass:"title"},[t._v("翻牌数据")]),a("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择平台"},on:{change:t.platformSelect},model:{value:t.platformTypeValue,callback:function(e){t.platformTypeValue=e},expression:"platformTypeValue"}},[a("el-option",{attrs:{value:"",label:"全部平台"}}),t._l(t.platformList,function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})],2),a("el-date-picker",{staticClass:"picker-wrap",attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyyMMdd"},on:{change:t.timeDataSelect},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}}),a("el-button",{attrs:{type:"primary"}},[t._v("查询")])],1),a("h2",{staticClass:"seconde-title"},[t._v("活动数据")]),a("div",{staticClass:"digital-info-wrap"},[a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("翻牌活动首页访问人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.cardIndexVisitorNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("翻牌人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.cardNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("翻牌次数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.drawCount))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("领取人数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.fetchNumber))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"type-name"},[t._v("领取张数")]),a("p",{staticClass:"type-num"},[t._v(t._s(t.detailInfo.couponCount))])])])]),a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"title-wrap"},[a("h1",{staticClass:"title"},[t._v("用户列表")]),a("el-button",{staticClass:"title-btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{align:"center",prop:"unionId",label:"UnionID"}}),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"用户昵称"}}),a("el-table-column",{attrs:{align:"center",label:"平台"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.platformList[e.row.appletId])+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"drawCount",label:"翻牌次数"}}),a("el-table-column",{attrs:{align:"center",prop:"couponCount",label:"领取张数"}}),a("el-table-column",{attrs:{align:"center",prop:"collectCount",label:"收藏数量"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},_r=[],kr={name:"turn-card-exchange-data",components:{},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},platformTypeValue:"",platformList:{1:"很实惠",2:"聚驿优品"},isPost:!1,detailInfo:{cardIndexVisitorNumber:0,cardNumber:0,drawCount:0,fetchNumber:0,couponCount:0},timeListValue:[],tableDataList:[],totalCount:0,pageSize:20,page:1}},created:function(){var t=this;t.detailInfo=t.$route.query,t.getListData()},methods:{getListData:function(){var t=this,e={appletId:t.platformTypeValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){hr(e).then(function(e){t.detailInfo={cardIndexVisitorNumber:e.cardIndexVisitorNumber,cardNumber:e.cardNumber,drawCount:e.drawCount,fetchNumber:e.fetchNumber,couponCount:e.couponCount},t.tableDataList=e.list,t.totalCount=e.totalCount,t.pageSize=Number(e.pageSize),t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.platformTypeValue,startAt:t.timeListValue[0]||"",endAt:t.timeListValue[1]||"",pageSize:t.pageSize,page:t.page,isExport:1};vr("turnCardExchangeData",e)},platformSelect:function(){this.getListData()},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t,e.getListData()},timeDataSelect:function(t){var e=this;e.timeListValue=t,e.getListData()},showDetail:function(t){this.$router.push({name:"exchangeDataDetail",query:{nickName:t.nickName,unionId:t.unionId,appletId:this.platformTypeValue,platformType:this.platformList[this.platformTypeValue]||"全部"}})}}},xr=kr,Sr=(a("f65f"),Object(u["a"])(xr,wr,_r,!1,null,"740fe1f6",null)),Tr=Sr.exports,Pr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invite-detail-wrap"},[a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"title-wrap"},[a("h1",{staticClass:"title"},[t._v("\n        平台: "+t._s(t.detailInfo.platformType)),a("span",{staticClass:"username"},[t._v("用户昵称: "+t._s(t.detailInfo.nickName))])]),a("el-button",{staticClass:"title-btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("p",{staticClass:"invite-num"},[t._v("成功邀请人数: "+t._s(t.totalInviteAward))]),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{prop:"regTime",align:"center",label:"日期"}}),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"邀请好友昵称"}}),a("el-table-column",{attrs:{align:"center",prop:"inviteAward",label:"积分明细"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.inviteAward>0?"+"+e.row.inviteAward:0)+"\n        ")]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},jr=[],Ar={name:"invite-detail",components:{},data:function(){return{tableDataList:[],detailInfo:{},totalInviteAward:0,totalCount:0,pageSize:20,page:1}},created:function(){var t=this;t.detailInfo=t.$route.query,t.getListData()},methods:{getListData:function(){var t=this,e={appletId:t.detailInfo.appletId,unionId:t.detailInfo.unionId,pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){fr(e).then(function(e){t.tableDataList=e.list,t.totalInviteAward=e.totalInviteAward,t.totalCount=Number(e.totalCount),t.pageSize=Number(e.pageSize),t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.detailInfo.appletId,unionId:t.detailInfo.unionId,pageSize:t.pageSize,page:t.page,isExport:1};vr("inviteSendDetail",e)},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t,e.getListData()}}},Or=Ar,Nr=(a("4f54"),Object(u["a"])(Or,Pr,jr,!1,null,"a0cd2e60",null)),Ir=Nr.exports,Lr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exchange-data-detail-wrap"},[a("div",{staticClass:"section-wrap"},[a("div",{staticClass:"title-wrap"},[a("h1",{staticClass:"title"},[t._v("\n        平台: "+t._s(t.detailInfo.platformType)),a("span",{staticClass:"username"},[t._v("用户昵称: "+t._s(t.detailInfo.nickName))])]),a("el-button",{staticClass:"title-btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),a("el-table",{staticClass:"table-wrap",attrs:{"header-row-class-name":"table-header",data:t.tableDataList}},[a("el-table-column",{attrs:{prop:"drawTime",align:"center",label:"日期"}}),a("el-table-column",{attrs:{align:"center",label:"优惠券名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.merchantName)+" | "+t._s(e.row.name)+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"积分"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.expendGoldenBean>0?"-"+e.row.expendGoldenBean:0)+"\n        ")]}}])})],1),a("el-pagination",{staticClass:"pagination-wrap",attrs:{layout:"sizes, total, prev, pager, next, jumper","hide-on-single-page":t.totalCount/t.pageSize<=1,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},zr=[],Vr={name:"exchange-data-detail",components:{},data:function(){return{tableDataList:[],detailInfo:{},totalCount:0,pageSize:20,page:1}},created:function(){var t=this;t.detailInfo=t.$route.query,t.getListData()},methods:{getListData:function(){var t=this,e={appletId:t.detailInfo.appletId,unionId:t.detailInfo.unionId,pageSize:t.pageSize,page:t.page};return!t.isPost&&(t.isPost=!0,new Promise(function(a,n){gr(e).then(function(e){t.tableDataList=e.list,t.totalCount=Number(e.rowCount),t.isPost=!1,a(e)}).catch(function(e){t.isPost=!1})}))},exportData:function(){var t=this,e={appletId:t.detailInfo.appletId,unionId:t.detailInfo.unionId,pageSize:t.pageSize,page:t.page,isExport:1};vr("exchangeDataDetail",e)},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){var e=this;e.page=t,e.getListData()}}},Er=Vr,Mr=(a("f0aa"),Object(u["a"])(Er,Lr,zr,!1,null,"b76f5d34",null)),$r=Mr.exports,Fr={path:"/integral-active-manage",name:"integralActiveManage",component:ur,children:[{path:"invite-send-points",name:"inviteSendPoints",component:Cr},{path:"turncard-exchange-data",name:"turnCardExchangeData",component:Tr},{path:"invite-send-detail",name:"inviteSendDetail",component:Ir},{path:"exchange-data-detail",name:"exchangeDataDetail",component:$r}]},Ur=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view",{staticClass:"aiduifen"})},qr=[],Gr={},Yr=Object(u["a"])(Gr,Ur,qr,!1,null,null,null),Rr=Yr.exports,Hr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-data"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"新增数据",name:"addData"}},[a("addData")],1),a("el-tab-pane",{attrs:{label:"首次互换客户数据",name:"firstExchangeData"}},["firstExchangeData"===t.activeName?a("firstExchangeData",{ref:"firstExchange"}):t._e()],1)],1)],1)},Qr=[],Br=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-data"},[a("div",{staticClass:"search"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择用户来源"},on:{change:t.userOriginChange},model:{value:t.userOrigin,callback:function(e){t.userOrigin=e},expression:"userOrigin"}},t._l(t.userOriginOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1),a("el-select",{attrs:{clearable:"",placeholder:"请选择用户类型"},on:{change:t.userTypeChange},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}},t._l(t.userTypeOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1),a("el-date-picker",{staticClass:"date-picker",attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDateChange},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),a("el-input",{staticClass:"header-search",attrs:{placeholder:"请输入用户手机号、昵称进行搜索",clearable:""},on:{clear:t.inputClear},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.searchKey}},[t._v("搜索")]),a("el-button",{staticClass:"export-btn",attrs:{type:"success"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"num-box"},[a("p",[t._v("新增爱兑分用户")]),a("p",{staticClass:"num"},[t._v(t._s(t.newUserTotal))])]),a("p",{staticClass:"tab-title"},[t._v("用户列表（当天默认显示昨天数据）")]),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"UnionId",prop:"unionId"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户昵称",prop:"nickName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"手机号码",prop:"phone"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"授权登录时间",prop:"authLoginTime"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"昵称",prop:"nickName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"注册时间",prop:"regTime"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"首次进入时间",prop:"enterAppletTime"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"推广渠道",prop:"merchantLinkName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户类型",prop:"userType"}})],1),parseInt(t.total)>1?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:parseInt(t.total)},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1)])},Kr=[];function Jr(t){return Q({url:"/wallet/users-data/new-users",method:"get",params:t})}function Wr(t){return Q({url:"/wallet/users-data/first-exchange",method:"get",params:t})}function Zr(t){return Q({url:"/wallet/active-data/active-exchange",method:"get",params:t})}function Xr(t){return Q({url:"/wallet/active-data/active-users",method:"get",params:t})}function ti(t){return Q({url:"/wallet/active-data/exchange-detailed",method:"get",params:t})}var ei,ai,ni,ri,ii,si,li={data:function(){return{page:1,pageSize:20,total:0,totalPage:0,activeName:"addData",userOrigin:"",userOriginOptions:["全部"],userType:"",userTypeOptions:["未注册用户","注册用户"],newUserTotal:0,rangeDate:"",keyword:"",tableData:[]}},components:{},mounted:function(){var t,e=new Date;t=F(e.setTime(e.getTime()-864e5),"yyyy-MM-dd"),this.rangeDate=[],this.rangeDate[0]=t,this.rangeDate[1]=t,this.getAddData(this.getQueryData())},methods:{getAddData:function(t){var e=this;Jr(t).then(function(t){e.tableData=t.list,e.newUserTotal=t.newUserTotal,e.total=Number(t.count)})},getQueryData:function(){var t=this.rangeDate,e={page:this.page,pageSize:this.pageSize,channelId:""===this.userOrigin?"":this.userOrigin,isRegister:""===this.userType?void 0:this.userType,keyword:""===this.keyword?void 0:this.keyword};return t&&(e.startAt="".concat(t[0]," 00:00:00"),e.endAt="".concat(t[1]," 23:59:59")),e},userOriginChange:function(t){this.userOrigin=t,this.page=1,this.getAddData(this.getQueryData())},userTypeChange:function(t){this.userType=t,this.page=1,this.getAddData(this.getQueryData())},handleDateChange:function(){this.page=1,this.getAddData(this.getQueryData())},inputClear:function(){this.keyword=""},searchKey:function(){this.page=1,this.getAddData(this.getQueryData())},exportData:function(){var t=this,e="",a="",n="",r=t.userOrigin?t.userOrigin:"",i=this.userType?this.userType:"",s=this.keyword?this.keyword:"",l="".concat(q.backend,"/wallet/users-data/export-new-users");this.rangeDate&&this.rangeDate.length>0&&(e=this.rangeDate[0]?"".concat(this.rangeDate[0]," 00:00:00"):"",a=this.rangeDate[1]?"".concat(this.rangeDate[1]," 00:00:00"):""),n="".concat(l,"?t=").concat(sessionStorage.getItem("t"),"&page=1&startAt=").concat(e,"&endAt=").concat(a,"&channelId=").concat(r,"&isRegister=").concat(i,"&keyword=").concat(s),window.open(n)},handleCurrentChange:function(t){this.page=t,this.getAddData(this.getQueryData())}}},oi=li,ci=Object(u["a"])(oi,Br,Kr,!1,null,null,null),ui=ci.exports,pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"first-exchange-data"},[a("div",{staticClass:"search"},[a("el-date-picker",{staticClass:"date-picker",attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDateChange},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),a("el-input",{staticClass:"header-search",attrs:{placeholder:"请输入用户手机号、昵称进行搜索",clearable:""},on:{clear:t.inputClear},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.searchKey}},[t._v("查询")]),a("el-button",{staticClass:"export-btn",attrs:{type:"success"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"num-box"},[a("p",[t._v("首次积分互换客户")]),a("p",{staticClass:"num"},[t._v(t._s(t.firstExchangeTotal))])]),a("p",{staticClass:"tab-title"},[t._v("用户列表（当天默认显示昨天数据）")]),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"首次互换日期",prop:"entrustedAt"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"UnionId",prop:"wxUnionId"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户昵称",prop:"nickname"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"手机号码",prop:"mobile"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"身份证验证",prop:"isAuthenticated"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"身份证号",prop:"identificationNumber"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换方式",prop:"modeType"}})],1),parseInt(t.total)>1?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:parseInt(t.total)},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1)])},di=[],mi={data:function(){return{page:0,pageSize:20,total:0,totalPage:0,activeName:"firstExchangeData",rangeDate:"",keyword:"",tableData:[],firstExchangeTotal:0}},mounted:function(){var t,e=new Date;t=F(e.setTime(e.getTime()-864e5),"yyyy-MM-dd"),this.rangeDate=[],this.rangeDate[0]=t,this.rangeDate[1]=t,this.getExchangeData(this.getQueryData())},methods:{getExchangeData:function(t){var e=this;Wr(t).then(function(t){e.tableData=t.list,e.firstExchangeTotal=t.totalCount,e.total=Number(t.totalCount)})},getQueryData:function(){var t=this.rangeDate,e={page:this.page,pageSize:this.pageSize,searchKey:""===this.keyword?void 0:this.keyword};return t&&(e.startAt="".concat(t[0]," 00:00:00"),e.endAt="".concat(t[1]," 23:59:59")),e},handleDateChange:function(){this.page=0,this.getExchangeData(this.getQueryData())},inputClear:function(){this.keyword="",this.page=0,this.getExchangeData(this.getQueryData())},searchKey:function(){this.page=0,this.getExchangeData(this.getQueryData())},exportData:function(){var t="",e="",a="",n=this.keyword?this.keyword:"",r="".concat(q.backend,"/wallet/users-data/first-exchange");this.rangeDate&&this.rangeDate.length>0&&(t=this.rangeDate[0]?"".concat(this.rangeDate[0]," 00:00:00"):"",e=this.rangeDate[1]?"".concat(this.rangeDate[1]," 23:59:59"):""),a="".concat(r,"?t=").concat(sessionStorage.getItem("t"),"&page=0&startAt=").concat(t,"&endAt=").concat(e,"&searchKey=").concat(n,"&isExport=1"),window.open(a)},handleCurrentChange:function(t){this.page=t-1,this.getExchangeData(this.getQueryData())}}},fi=mi,hi=Object(u["a"])(fi,pi,di,!1,null,null,null),gi=hi.exports,vi={data:function(){return{page:0,pageSize:20,total:0,totalPage:0,activeName:"addData"}},components:{addData:ui,firstExchangeData:gi},mounted:function(){this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{}},bi=vi,yi=(a("8bb3"),Object(u["a"])(bi,Hr,Qr,!1,null,null,null)),Di=yi.exports,Ci=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-data"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"客户活跃数据",name:"userActiveData"}},[a("userActiveData")],1),a("el-tab-pane",{attrs:{label:"互换客户活跃数据",name:"exchangeActiveData"}},["exchangeActiveData"===t.activeName?a("exchangeActiveData",{ref:"activeExchange"}):t._e()],1)],1)],1)},wi=[],_i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-active-data"},[a("div",{staticClass:"search"},[a("el-date-picker",{staticClass:"date-picker",attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDateChange},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),a("el-input",{staticClass:"header-search",attrs:{placeholder:"请输入用户手机号、昵称进行搜索",clearable:""},on:{clear:t.inputClear},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.searchKey}},[t._v("查询")]),a("el-button",{staticClass:"export-btn",attrs:{type:"success"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"num-box"},[a("p",[t._v("活跃客户数")]),a("p",{staticClass:"num"},[t._v(t._s(t.activeUserTotal))])]),a("p",{staticClass:"tab-title"},[t._v("用户列表（当天默认显示昨天数据）")]),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"最近登录时间",prop:"lastLoginTime"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"注册时间",prop:"registerTime"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"UnionId",prop:"unionId"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户昵称",prop:"nickName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"手机号码",prop:"mobile"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"身份验证",prop:"isAuthenticated"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"身份证号",prop:"identificationNumber"}})],1),parseInt(t.total)>1?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:parseInt(t.total)},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1)])},ki=[],xi={data:function(){return{page:1,pageSize:20,total:0,totalPage:0,rangeDate:"",keyword:"",tableData:[],activeUserTotal:0}},mounted:function(){var t,e=new Date;t=F(e.setTime(e.getTime()-864e5),"yyyy-MM-dd"),this.rangeDate=[],this.rangeDate[0]=t,this.rangeDate[1]=t,this.getExchangeData(this.getQueryData())},methods:{getExchangeData:function(t){var e=this;Xr(t).then(function(t){e.tableData=t.list,e.activeUserTotal=t.activeUserTotal,e.total=Number(t.count)})},getQueryData:function(){var t=this.rangeDate,e={page:this.page,pageSize:this.pageSize,keyword:""===this.keyword?void 0:this.keyword};return t&&(e.startAt="".concat(t[0]," 00:00:00"),e.endAt="".concat(t[1]," 23:59:59")),e},handleDateChange:function(){this.page=1,this.getExchangeData(this.getQueryData())},inputClear:function(){this.keyword="",this.page=1,this.getExchangeData(this.getQueryData())},searchKey:function(){this.page=1,this.getExchangeData(this.getQueryData())},exportData:function(){var t="",e="",a="",n=this.keyword?this.keyword:"",r="".concat(q.backend,"/wallet/active-data/export-active-users");this.rangeDate&&this.rangeDate.length>0&&(t=this.rangeDate[0]?"".concat(this.rangeDate[0]," 00:00:00"):"",e=this.rangeDate[1]?"".concat(this.rangeDate[1]," 23:59:59"):""),a="".concat(r,"?t=").concat(sessionStorage.getItem("t"),"&page=0&startAt=").concat(t,"&endAt=").concat(e,"&keyword=").concat(n),window.open(a)},handleCurrentChange:function(t){this.page=t,this.getExchangeData(this.getQueryData())}}},Si=xi,Ti=Object(u["a"])(Si,_i,ki,!1,null,null,null),Pi=Ti.exports,ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exchange-active-data"},[a("div",{staticClass:"search"},[a("el-date-picker",{staticClass:"date-picker",attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDateChange},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),a("el-input",{staticClass:"header-search",attrs:{placeholder:"请输入用户手机号、昵称进行搜索",clearable:""},on:{clear:t.inputClear},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.searchKey}},[t._v("查询")]),a("el-button",{staticClass:"export-btn",attrs:{type:"success"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"num-box"},[a("p",[t._v("互换客户活跃数据")]),a("p",{staticClass:"num"},[t._v(t._s(t.activeExchangeTotal))])]),a("p",{staticClass:"tab-title"},[t._v("用户列表（当天默认显示昨天数据）")]),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换时间",prop:"entrustedAt"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"注册时间",prop:"registerAt"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"UnionId",prop:"wxUnionId"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户昵称",prop:"nickname"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"手机号码",prop:"mobile"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"身份验证",prop:"isAuthenticated"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"身份证号",prop:"identificationNumber"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换次数",prop:"count"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换方式",prop:"modeType"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"ADF数量",prop:"actualAmount"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.toDetail(e.row)}}},[t._v("查看详情")])]}}])})],1),parseInt(t.total)>1?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:parseInt(t.total)},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1)])},Ai=[],Oi={data:function(){return{page:0,pageSize:20,total:0,totalPage:0,rangeDate:"",keyword:"",tableData:[],activeExchangeTotal:0}},mounted:function(){var t,e=new Date;t=F(e.setTime(e.getTime()-864e5),"yyyy-MM-dd"),this.rangeDate=[],this.rangeDate[0]=t,this.rangeDate[1]=t,this.getExchangeData(this.getQueryData())},methods:{getExchangeData:function(t){var e=this;Zr(t).then(function(t){e.tableData=t.list,e.activeExchangeTotal=t.totalCount,e.total=Number(t.totalCount)})},getQueryData:function(){var t=this.rangeDate,e={page:this.page,pageSize:this.pageSize,searchKey:""===this.keyword?void 0:this.keyword};return t&&(e.startAt="".concat(t[0]," 00:00:00"),e.endAt="".concat(t[1]," 23:59:59")),e},handleDateChange:function(){this.page=0,this.getExchangeData(this.getQueryData())},inputClear:function(){this.keyword="",this.page=0,this.getExchangeData(this.getQueryData())},searchKey:function(){this.page=0,this.getExchangeData(this.getQueryData())},exportData:function(){var t="",e="",a="",n=this.keyword?this.keyword:"",r="".concat(q.backend,"/wallet/active-data/active-exchange");this.rangeDate&&this.rangeDate.length>0&&(t=this.rangeDate[0]?"".concat(this.rangeDate[0]," 00:00:00"):"",e=this.rangeDate[1]?"".concat(this.rangeDate[1]," 23:59:59"):""),a="".concat(r,"?t=").concat(sessionStorage.getItem("t"),"&page=0&startAt=").concat(t,"&endAt=").concat(e,"&searchKey=").concat(n,"&isExport=1"),window.open(a)},toDetail:function(t){this.$router.push({name:"aiduifenExchangeDetail",query:{name:t.nickname,id:t.uid}})},handleCurrentChange:function(t){this.page=t-1,this.getExchangeData(this.getQueryData())}}},Ni=Oi,Ii=Object(u["a"])(Ni,ji,Ai,!1,null,null,null),Li=Ii.exports,zi={data:function(){return{page:0,pageSize:20,total:0,totalPage:0,activeName:"userActiveData"}},components:{userActiveData:Pi,exchangeActiveData:Li},mounted:function(){this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{}},Vi=zi,Ei=(a("708d"),Object(u["a"])(Vi,Ci,wi,!1,null,null,null)),Mi=Ei.exports,$i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exchange-detail"},[a("header",[a("p",{staticClass:"user-name"},[t._v("用户昵称："),a("span",[t._v(t._s(t.userName))])]),a("el-button",{staticClass:"export export-btn",attrs:{type:"success"},on:{click:t.exportData}},[t._v("导出")])],1),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换日期",prop:"createdAt"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"积分种类",prop:"currencyTypeName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换方式",prop:"modeType"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"积分",prop:"number"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"互换用户",prop:"platform"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"ADF",prop:"adfAmount"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"类型",prop:"typeText"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"状态",prop:"statusText"}})],1),parseInt(t.total)>1?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:parseInt(t.total)},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1)])},Fi=[],Ui={data:function(){return{page:0,pageSize:20,total:0,totalPage:0,uid:"",tableData:[],userName:""}},mounted:function(){this.uid=this.$route.query.id,this.userName=this.$route.query.name,this.getData(this.getQueryData())},methods:{getData:function(t){var e=this;ti(t).then(function(t){e.tableData=t.list,e.activeExchangeTotal=t.totalCount,e.total=Number(t.totalCount)})},getQueryData:function(){var t={page:this.page,pageSize:this.pageSize,uid:this.uid?this.uid:""};return t},exportData:function(){var t="",e="",a="",n=this.keyword?this.keyword:"",r=this.uid,i="".concat(q.backend,"/wallet/active-data/exchange-detailed");this.rangeDate&&this.rangeDate.length>0&&(t=this.rangeDate[0]?"".concat(this.rangeDate[0]," 00:00:00"):"",e=this.rangeDate[1]?"".concat(this.rangeDate[1]," 23:59:59"):""),a="".concat(i,"?t=").concat(sessionStorage.getItem("t"),"&page=0&startAt=").concat(t,"&endAt=").concat(e,"&searchKey=").concat(n,"&uid=").concat(r,"&isExport=1"),console.log("33--",a),window.open(a)},handleCurrentChange:function(t){this.page=t-1,this.getData(this.getQueryData())}}},qi=Ui,Gi=(a("4277"),Object(u["a"])(qi,$i,Fi,!1,null,null,null)),Yi=Gi.exports,Ri={path:"/aiduifen",name:"aiduifen",redirect:"/aiduifen/addData",component:Rr,children:[{path:"userData",name:"aiduifenUserData",component:Di},{path:"activeData",name:"aiduifenActiveData",component:Mi},{path:"exchangeDetail",name:"aiduifenExchangeDetail",component:Yi}]},Hi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"积分结算",name:"Settle"}},[a("div",{staticClass:"form-inlne"},[a("create-form",{attrs:{formConfig:t.formConfigSettle},on:{submit:t.submetSettle}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.dowloadSettle}},[t._v("导出")])],1),a("create-card",{attrs:{data:t.cardDataSettle}}),a("p",[t._v("积分明细")]),a("create-table",{attrs:{tableData:t.tableDataSettle,tableConfig:t.tableConfigSettle,totalCount:t.totalSettle},on:{change:t.changeSettle}})],1),a("el-tab-pane",{attrs:{label:"积分资产",name:"Assets"}},[a("div",{staticClass:"form-inlne"},[a("create-form",{attrs:{formConfig:t.formConfigAssets},on:{submit:t.submitAssets}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.dowloadAssets}},[t._v("导出")])],1),a("create-card",{attrs:{data:t.cardDataAssets}}),a("p",[t._v("用户列表")]),a("create-table",{attrs:{tableData:t.tableDataAssets,tableConfig:t.tableConfigAssets,totalCount:t.totalAssets},on:{change:t.changeAssets}})],1)],1)],1)},Qi=[],Bi=(a("96cf"),a("3b8d")),Ki={props:{formConfig:{type:Array,default:function(){return[]}}},data:function(){var t={};return this.formConfig.map(function(e){t[e.key]=e.value}),t},render:function(){var t=this,e=arguments[0];return e("div",[this.formConfig.map(function(e){return t[e.type](e)}),e("el-button",{attrs:{type:"primary"},on:{click:this.submit}},["查询"])])},methods:{submit:function(){var t=this,e={},a=this.formConfig.map(function(t){return t.key});a.forEach(function(a){e[a]=t[a]}),this.$emit("submit",e)},input:function(t){var e=this,a=this.$createElement;return a("el-input",{attrs:{placeholder:t.placeholder},class:"input",model:{value:this[t.key],callback:function(a){e.$set(e,t.key,a)}}})},datePicker:function(t){var e=this,a=this.$createElement;return a("el-date-picker",{class:"picker",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:this[t.key],callback:function(a){e.$set(e,t.key,a)}}})},select:function(t){var e=this,a=this.$createElement;return a("el-select",{attrs:{placeholder:t.placeholder||"请选择平台"},model:{value:this[t.key],callback:function(a){e.$set(e,t.key,a)}}},[t.options.map(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})])}}},Ji=Ki,Wi=(a("ab73"),Object(u["a"])(Ji,ei,ai,!1,null,"3a662748",null)),Zi=Wi.exports,Xi={props:{data:{type:Array,default:function(){return[]}}},render:function(){var t=arguments[0];return t("div",{class:"card-wrp"},[this.data.map(function(e){return t("div",{class:"card",key:e.label},[t("h2",[e.label]),t("p",[e.value])])})])}},ts=Xi,es=(a("5552"),Object(u["a"])(ts,ni,ri,!1,null,"7e40b3f9",null)),as=es.exports,ns=(a("20d6"),{}),rs=[],is={props:{tableData:{type:Array,default:function(){return[]}},totalCount:{type:Number,default:function(){return 0}},tableConfig:{type:Array,default:function(){return[]}}},created:function(){},render:function(){var t=arguments[0];return t("div",[t("el-table",{attrs:{data:this.tableData,stripe:!0},on:{"sort-change":this.sortChange}},[this.tableConfig.map(function(e){return e.formatter?t("el-table-column",{attrs:{sortable:e.sortable||!1,prop:e.prop,label:e.label,formatter:e.formatter},key:e.prop}):t("el-table-column",{attrs:{sortable:e.sortable||!1,prop:e.prop,label:e.label},key:e.prop})})]),t("el-pagination",{on:{"current-change":this.onChange},attrs:{background:!0,layout:"prev, pager, next",total:this.totalCount},style:"margin-top: 20px;float: right"})])},methods:{sortChange:function(t){t.column;var e=t.prop,a=t.order,n={name:e,sort:"ascending"==a?"ASC":"DESC"},r=rs.findIndex(function(t){return t.name===n.name});r>-1?rs[r].sort=n.sort:rs.push(n),ns["sortArr"]=JSON.stringify(rs),this.$emit("change",ns)},onChange:function(t){ns.page=t,this.$emit("change",ns)}}},ss=is,ls=Object(u["a"])(ss,ii,si,!1,null,"fff0ce16",null),os=ls.exports,cs=(a("386d"),function(t,e){var a=[];return Object.keys(e).forEach(function(t){return e[t]&&a.push("".concat(t,"=").concat(e[t]))}),-1===t.search(/\?/)?t+="?".concat(a.join("&")):t+="&".concat(a.join("&")),t}),us=function(t){return Q.post("property/points/query-statistics-points-action-record",t)},ps=function(t){var e=q.backend+"/property/points/query-statistics-points-action-record?isExport=1";t.t=sessionStorage.getItem("t"),e=cs(e,t),console.log(e),location.href=e},ds=function(t){var e=q.backend+"/property/points/export-cash-buy-day-record";t.t=sessionStorage.getItem("t"),e=cs(e,t),location.href=e},ms=function(t){var e=q.backend+"/property/points/export-points-receive-day";t.t=sessionStorage.getItem("t"),e=cs(e,t),location.href=e},fs=function(t){var e=q.backend+"/property/points/export-points-settle";t.t=sessionStorage.getItem("t"),e=cs(e,t),location.href=e},hs=function(t){var e=q.backend+"/property/points/export-points-total-value";t.t=sessionStorage.getItem("t"),e=cs(e,t),location.href=e},gs=function(t){var e=cs("property/points/get-points-receive-day",t);return Q.get(e)},vs=function(t){var e=cs("property/points/get-cash-buy-day-record",t);return Q.get(e)},bs=function(t){t.appletId=t.appletId||1;var e=cs("property/points/get-points-settle",t);return Q.get(e)},ys=function(t){t.appletId=t.appletId||1;var e=cs("property/points/get-points-total-value",t);return Q.get(e)};function Ds(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function Cs(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ds(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ds(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var ws={data:function(){return{activeName:"Settle",totalSettle:0,paramSettle:{startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1),appletId:1},formConfigSettle:[{type:"select",key:"appletId",value:1,options:[{label:"很实惠",value:1},{label:"聚驿",value:2}]},{type:"datePicker",key:"date",value:[new Date(+(new Date).setHours(0,0,0,0)-864e5),new Date(Math.floor(+(new Date).setHours(0,0,0,0))-1)]}],cardDataSettle:[{label:"发放积分",value:0},{label:"回收积分",value:0},{label:"未回收积分",value:0}],tableDataSettle:[],tableConfigSettle:[{prop:"buyDate",label:"日期"},{prop:"distributionPoints",label:"发放积分数",sortable:!0},{prop:"recoveryPoints",label:"回收积分数",sortable:!0},{prop:"nodeGetPoints",label:"平台积分"},{prop:"userGetPoints",label:"用户积分"},{prop:"pointsType",label:"积分类型"}],totalAssets:0,paramAssets:{startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1),appletId:1},formConfigAssets:[{type:"select",key:"appletId",value:1,options:[{label:"很实惠",value:1},{label:"聚驿",value:2}]},{type:"datePicker",key:"date",value:[new Date(+(new Date).setHours(0,0,0,0)-864e5),new Date(Math.floor(+(new Date).setHours(0,0,0,0))-1)]}],cardDataAssets:[{label:"积分发放总额",value:0},{label:"积分回收消耗总额",value:0},{label:"积分发放总资产",value:0},{label:"积分回收消耗总资产",value:0}],tableDataAssets:[],tableConfigAssets:[{prop:"date",label:"日期"},{prop:"distributionGBTTotalVale",label:"积分发放金额",formatter:function(t){return(t.distributionGBTTotalVale/100).toFixed(2)}},{prop:"recoveryPointsGBTTotalVale",label:"积分回收消耗金额",formatter:function(t){return(t.recoveryPointsGBTTotalVale/100).toFixed(2)}},{prop:"distributionADFTotalVale",label:"积分发放adf价值",formatter:function(t){return t.distributionADFTotalVale?t.distributionADFTotalVale.toFixed(8)+" ADF":"-"}},{prop:"recoveryPointsADFTotalVale",label:"积分回收消耗adf价值",formatter:function(t){return t.recoveryPointsADFTotalVale?t.recoveryPointsADFTotalVale.toFixed(8)+" ADF":"-"}}]}},components:{createForm:Zi,createCard:as,createTable:os},created:function(){var t=this.$route.query.activeName;t&&(this.activeName=t),this.getPointsTotalValue(this.paramAssets),this.getPointsSettle(this.paramSettle)},methods:{dowloadAssets:function(){hs(this.paramAssets)},dowloadSettle:function(){fs(this.paramSettle)},changeSettle:function(t){var e=Cs({},this.paramSettle,{},t);this.getPointsSettle(e)},changeAssets:function(t){var e=Cs({},this.paramAssets,{},t);this.getPointsTotalValue(e)},submitAssets:function(t){var e=this.formatParam(t);this.paramAssets=Cs({},this.paramAssets,{},e),this.getPointsTotalValue(this.paramAssets)},submetSettle:function(t){var e=this.formatParam(t);this.paramSettle=Cs({},this.paramSettle,{},e),this.getPointsSettle(this.paramSettle)},formatParam:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"startTime",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"endTime";if(!t.date)return Cs({appletId:1,startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1)},t);var n={};for(var r in t[e]=Math.floor(+t.date[0]/1e3),t[a]=Math.floor(+t.date[1]/1e3)+86400-1,t)(t[r]&&"date"!==r||0===t[r]&&"date"!==r)&&(n[r]=t[r]);return n},formatOptions:function(t){return t?Array.isArray(t)?t.map(function(t,e){return{label:t,value:e}}):Object.keys(t).map(function(e){return{label:t[e],value:e}}):[]},getPointsTotalValue:function(){var t=Object(Bi["a"])(regeneratorRuntime.mark(function t(){var e,a,n,r,i,s,l=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.next=3,ys(e);case 3:a=t.sent,n=a.totalCount,r=a.totalData,i=void 0===r?{}:r,s=a.lists,this.tableDataAssets=s,this.cardDataAssets[0].value=i.distributionGBTTotalVale?"¥"+(i.distributionGBTTotalVale/100).toFixed(2):"-",this.cardDataAssets[1].value=i.recoveryPointsGBTTotalVale?"¥"+(i.recoveryPointsGBTTotalVale/100).toFixed(2):"-",this.cardDataAssets[2].value=i.distributionADFTotalVale?"ADF:"+i.distributionADFTotalVale.toFixed(8):"-",this.cardDataAssets[3].value=i.recoveryPointsADFTotalVale?"ADF:"+i.recoveryPointsADFTotalVale.toFixed(8):"-",this.totalAssets=n;case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getPointsSettle:function(){var t=Object(Bi["a"])(regeneratorRuntime.mark(function t(){var e,a,n,r,i,s,l=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.next=3,bs(e);case 3:a=t.sent,n=a.totalCount,r=a.totalData,i=void 0===r?{}:r,s=a.lists,this.tableDataSettle=s,this.cardDataSettle[0].value=i.distributionPoints,this.cardDataSettle[1].value=i.recoveryPoints,this.cardDataSettle[2].value=i.unrecoveryPoints,this.totalSettle=n;case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},_s=ws,ks=(a("71d2"),Object(u["a"])(_s,Hi,Qi,!1,null,"3b39a090",null)),xs=ks.exports,Ss=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h1",[t._v("现金购买数据")])]),a("div",{staticClass:"form-inlne"},[a("create-form",{attrs:{formConfig:t.formConfig},on:{submit:t.submit}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.dowload}},[t._v("导出")])],1),a("create-card",{attrs:{data:t.cardData}}),a("p",[t._v("用户列表（默认显示昨天数据）")]),a("create-table",{attrs:{tableData:t.tableData,tableConfig:t.tableConfig,totalCount:t.totalCount},on:{change:t.change}})],1)],1)},Ts=[];function Ps(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function js(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ps(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ps(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var As={data:function(){return{totalCount:0,param:{startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1)},formConfig:[{type:"select",key:"appletId",options:[{label:"很实惠",value:1},{label:"聚驿",value:2}]},{type:"select",key:"dateKey",placeholder:"请选择时间类型",options:[{label:"统计时间",value:1},{label:"最近购买时间",value:2}]},{type:"datePicker",key:"date",value:[new Date(+(new Date).setHours(0,0,0,0)-864e5),new Date(Math.floor(+(new Date).setHours(0,0,0,0))-1)]}],cardData:[{label:"现金购买商品金额",value:0}],tableData:[],tableConfig:[{prop:"unionId",label:"unionId"},{prop:"nickname",label:"用户昵称"},{prop:"appletId",label:"平台",formatter:function(t){return 2==t.appletId?"聚驿":"很实惠"}},{prop:"totalPayment",label:"支付总金额",formatter:function(t){return(t.totalPayment/100).toFixed(2)}},{prop:"settleAmount",label:"返现总金额",formatter:function(t){return(t.settleAmount/100).toFixed(2)}},{prop:"buyTimes",label:"消费次数"}]}},components:{createForm:Zi,createCard:as,createTable:os},created:function(){this.getBuy(this.param)},methods:{dowload:function(){ds(this.param)},change:function(t){var e=js({},this.param,{},t);this.getBuy(e)},submit:function(t){this.param=js({},this.param,{},this.formatParam(t)),this.getBuy(this.param)},formatOptions:function(t){return t?Array.isArray(t)?t.map(function(t,e){return{label:t,value:e}}):Object.keys(t).map(function(e){return{label:t[e],value:e}}):[]},formatParam:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"startTime",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"endTime";if(!t.date)return js({startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1)},t);var n={};for(var r in t[e]=Math.floor(+t.date[0]/1e3),t[a]=Math.floor(+t.date[1]/1e3)+86400-1,t)(t[r]&&"date"!==r||0===t[r]&&"date"!==r)&&(n[r]=t[r]);return n},getBuy:function(){var t=Object(Bi["a"])(regeneratorRuntime.mark(function t(){var e,a,n,r,i,s,l=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.next=3,vs(e);case 3:if(a=t.sent,n=a.totalPayment,r=a.lists,i=a.appletName,s=a.totalCount,this.cardData[0].value=n?"¥"+(n/100).toFixed(2):"-",this.tableData=r,this.totalCount=s,i){t.next=13;break}return t.abrupt("return");case 13:this.formConfig[0].options=this.formatOptions(i);case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},Os=As,Ns=(a("c0e7"),Object(u["a"])(Os,Ss,Ts,!1,null,"0a7b9069",null)),Is=Ns.exports,Ls=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"获取积分数据",name:"getPoint"}},[a("div",[a("div",{staticClass:"search"},[a("create-form",{attrs:{formConfig:t.formConfigGet},on:{submit:t.submitGet}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.exportGet}},[t._v("导出")])],1),a("create-card",{attrs:{data:t.cardDataGet}}),a("p",{staticStyle:{"margin-bottom":"12px"}},[t._v("用户列表（当日默认显示昨日数据）")]),a("create-table",{attrs:{tableData:t.tableDataGet,tableConfig:t.tableConfigGet,totalCount:t.totalCountGet},on:{change:t.changeGet}})],1)]),a("el-tab-pane",{attrs:{label:"积分换购数据",name:"exchangePoint"}},[a("div",{staticClass:"search"},[a("create-form",{attrs:{formConfig:t.formConfigPost},on:{submit:t.submitPost}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.exportPost}},[t._v("导出")])],1),a("create-card",{attrs:{data:t.cardDataPost}}),a("p",{staticStyle:{"margin-bottom":"12px"}},[t._v("用户列表（当日默认显示昨日数据）")]),a("create-table",{attrs:{totalCount:t.totalCountPost,tableData:t.tableDataPost,tableConfig:t.tableConfigPost},on:{change:t.changePost}})],1)],1)],1)},zs=[];function Vs(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function Es(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Vs(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Vs(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Ms={data:function(){return{activeName:"getPoint",paramGet:{startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1)},totalCountGet:0,cardDataGet:[{label:"首次获取积分用户",value:0}],formConfigGet:[{type:"select",key:"appletId",options:[{label:"很实惠",value:1},{label:"聚驿",value:2}]},{type:"datePicker",key:"date",value:[new Date(+(new Date).setHours(0,0,0,0)-864e5),new Date(Math.floor(+(new Date).setHours(0,0,0,0))-1)]},{type:"input",key:"nicknameOrPhone",placeholder:"请输入用户手机号，昵称进行搜索"}],tableDataGet:[],tableConfigGet:[{prop:"receiveTime",label:"首次获取时间",formatter:function(t){return F(1e3*t.receiveTime)}},{prop:"unionId",label:"unionId"},{prop:"nickname",label:"用户昵称"},{prop:"appletId",label:"平台",formatter:function(t){return 2==t.appletId?"聚驿":"很实惠"}},{prop:"points",label:"积分",formatter:function(t){return"+"+t.points}}],totalCountPost:0,formConfigPost:[{type:"select",key:"appletId",options:[{label:"很实惠",value:1},{label:"聚驿",value:2}]},{type:"select",key:"buyType",placeholder:"请选择积分类型",options:[{label:"积分",value:1},{label:"积分+现金",value:2}]},{type:"datePicker",key:"date",value:[new Date(+(new Date).setHours(0,0,0,0)-864e5),new Date(Math.floor(+(new Date).setHours(0,0,0,0))-1)]},{type:"input",key:"keyword",placeholder:"请输入用户手机号，昵称进行搜索"}],cardDataPost:[{label:"首次积分兑换用户",value:"0"},{label:"首次积分+现金购买用户",value:"0"}],paramPost:{startAt:F(Math.floor(+new Date-1728e5),"yyyyMMdd"),endAt:F(Math.floor(+new Date-864e5),"yyyyMMdd")},tableDataPost:[],tableConfigPost:[{prop:"date",label:"兑换购买日期"},{prop:"unionId",label:"unionId"},{prop:"nickName",label:"用户昵称"},{prop:"appletName",label:"平台"},{prop:"actionTypeName",label:"商品类型"},{prop:"goodsName",label:"商品名称"},{prop:"buyTypeName",label:"类型"},{prop:"payment",label:"支付金额",formatter:function(t){return(t.payment/100).toFixed(2)}},{prop:"costPoints",label:"消耗积分",formatter:function(t){return-t.costPoints}}]}},components:{createTable:os,createForm:Zi,createCard:as},created:function(){var t=this.$route.query.activeName;t&&(this.activeName=t),this.getPoints(this.paramGet),this.postPoints(this.paramPost)},methods:{exportGet:function(){ms(this.paramGet)},postPoints:function(){var t=Object(Bi["a"])(regeneratorRuntime.mark(function t(){var e,a,n,r,i,s,l,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,us(e);case 3:a=t.sent,n=a.list,r=a.buyType,i=a.appletName,s=a.totalCount,l=a.summary,this.tableDataPost=n,this.cardDataPost[0].value=l.firstPayByPointsUnionIdCount,this.cardDataPost[1].value=l.firstPayByPointsAndMoneyUnionIdCount,this.formConfigPost[0].options=this.formatOptions(i),this.formConfigPost[1].options=this.formatOptions(r),this.totalCountPost=s;case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getPoints:function(){var t=Object(Bi["a"])(regeneratorRuntime.mark(function t(){var e,a,n,r,i,s,l=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.next=3,gs(e);case 3:a=t.sent,n=a.totalCount,r=a.totalUser,i=a.lists,s=a.appletName,this.cardDataGet[0].value=r,this.formConfigGet[0].options=this.formatOptions(s),this.tableDataGet=i,this.totalCountGet=n;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),formatOptions:function(t){return t?Array.isArray(t)?t.map(function(t,e){return{label:t,value:e}}):Object.keys(t).map(function(e){return{label:t[e],value:e}}):[]},changePost:function(t){t=Es({},t,{},this.paramPost),this.postPoints(t)},changeGet:function(t){t=Es({},t,{},this.paramGet),this.getPoints(t)},formatParam:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"startAt",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"endAt",n={};if("startTime"==e){if(!t.date)return Es({startTime:Math.floor((+(new Date).setHours(0,0,0,0)-864e5)/1e3),endTime:Math.floor(+(new Date).setHours(0,0,0,0)/1e3-1)},t);t[e]=Math.floor(+t.date[0]/1e3),t[a]=Math.floor(+t.date[1]/1e3)+86400-1}else{if(!t.date)return t;t[e]=F(t.date[0],"yyyyMMdd"),t[a]=F(t.date[1],"yyyyMMdd")}for(var r in t)(t[r]&&"date"!==r||0===t[r]&&"date"!==r)&&(n[r]=t[r]);return n},submitGet:function(t){this.paramGet=Es({},this.paramGet,{},this.formatParam(t,"startTime","endTime")),this.getPoints(this.paramGet)},submitPost:function(t){this.paramPost=this.formatParam(t),this.postPoints(this.paramPost)},exportPost:function(){ps(this.paramPost)}}},$s=Ms,Fs=(a("9845"),Object(u["a"])($s,Ls,zs,!1,null,"4ea3428c",null)),Us=Fs.exports,qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},Gs=[],Ys={name:"platform-user-data",components:{},data:function(){return{}}},Rs=Ys,Hs=(a("a200"),Object(u["a"])(Rs,qs,Gs,!1,null,"06865cc7",null)),Qs=Hs.exports,Bs={path:"/assets-manage",name:"AssetsManage",component:Qs,children:[{name:"IntegralAsset",path:"integral-asset",component:xs},{name:"IntegralBuy",path:"integral-buy",component:Is},{name:"IntegralManage",path:"integral-manage",component:Us}]},Ks=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"good-list"},[a("h2",{staticClass:"title"},[t._v("商品列表")]),a("div",{staticClass:"query"},[a("div",{staticClass:"query-type"},t._l(t.qeuryStatusList,function(e){return a("div",{key:e.label,staticClass:"query-type-item",class:{active:t.query.status===e.value},on:{click:function(a){return t.handerQueryType(e.value)}}},[t._v("\n        "+t._s(e.label)+"\n      ")])}),0),a("div",{staticClass:"query-list"},[a("el-select",{staticClass:"query-list-item",attrs:{placeholder:"请选择商家类型"},on:{change:t.handleScreenChange},model:{value:t.query.appletId,callback:function(e){t.$set(t.query,"appletId",e)},expression:"query.appletId"}},t._l(t.appletList,function(t,e){return a("el-option",{key:t,attrs:{label:t,value:e}})}),1),a("el-input",{staticClass:"query-list-item keyword",attrs:{placeholder:"输入商品名称"},model:{value:t.query.goodsName,callback:function(e){t.$set(t.query,"goodsName",e)},expression:"query.goodsName"}}),a("el-button",{staticClass:"query-list-item",attrs:{type:"primary"},on:{click:t.handleScreenChange}},[t._v("搜索")])],1)]),a("el-table",{attrs:{data:t.tableData},on:{"sort-change":t.handlerSort}},[a("el-table-column",{attrs:{label:"商品ID",prop:"goodsId"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goodsName"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.status?"在售":"仓库")+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"原价",prop:"originalPrice"}}),a("el-table-column",{attrs:{label:"售价",prop:"sellingPrice"}}),a("el-table-column",{attrs:{label:"购买积分",prop:"recyclingIntegral"}}),a("el-table-column",{attrs:{label:"访问人数",prop:"pv",sortable:""}}),a("el-table-column",{attrs:{label:"商品销量",prop:"salesVolume",sortable:""}}),a("el-table-column",{attrs:{label:"商品库存",prop:"stock"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.page.currentPage,"page-size":t.page.pageSize,"page-sizes":[10,20,50,100],layout:"sizes, prev, pager, next",total:t.page.total},on:{"size-change":t.handleScreenChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.page,"currentPage",e)},"update:current-page":function(e){return t.$set(t.page,"currentPage",e)},"update:pageSize":function(e){return t.$set(t.page,"pageSize",e)},"update:page-size":function(e){return t.$set(t.page,"pageSize",e)}}})],1)],1)},Js=[];function Ws(t){return Q({url:q.henshihuiMall+"/goods/chief-backend-goods/get-goods-list",method:"post",data:t})}function Zs(t){return Q({url:"/integralMall/pdd/get-goods-list",method:"post",data:t})}function Xs(t){t.t=sessionStorage.getItem("t"),t=L(t),window.open("".concat(q.backend,"/integralMall/pdd/get-goods-list?").concat(t))}function tl(t){return Q({url:"/integralMall/goods-coupon/view-coupon-list",method:"post",data:t})}function el(t){t.t=sessionStorage.getItem("t"),t=L(t),window.open("".concat(q.backend,"/integralMall/goods-coupon/export-coupon-list?").concat(t))}var al={appletList:{1:"很实惠",2:"聚驿"}};function nl(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function rl(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?nl(a,!0).forEach(function(e){Object(_["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nl(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var il={data:function(){return{loading:!1,query:{status:"",appletId:"2",goodsName:"",sortRules:null},page:{total:0,currentPage:1,pageSize:20},qeuryStatusList:[{label:"全部商品",value:""},{label:"在售商品",value:1},{label:"仓库中",value:0},{label:"已售完",value:2}],appletList:al.appletList,tableData:[]}},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this,e=t.page,a=rl({},t.query,{page:e.currentPage,pageSize:e.pageSize});t.loading=!0,Ws(a).then(function(e){var a=t.page;t.tableData=e.list,a.pageSize=Number(e.pageSize),a.total=Number(e.totalQuantity),t.loading=!1}).catch(function(){t.loading=!1})},handerQueryType:function(t){this.query.status=t,this.handleScreenChange()},handleScreenChange:function(t){var e=this;e.page.currentPage=1,e.getDataList()},handleCurrentChange:function(){this.getDataList()},handlerSort:function(t){t.order?this.query.sortRules={key:t.prop,sort:"ascending"===t.order?"ASC":"DESC"}:this.query.sortRules=null,this.getDataList()}}},sl=il,ll=(a("dc84"),Object(u["a"])(sl,Ks,Js,!1,null,"2e2310f0",null)),ol=ll.exports,cl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"good-list"},[a("h2",{staticClass:"title"},[t._v("拼多多商品列表")]),a("div",{staticClass:"query"},[a("div",{staticClass:"query-type"},t._l(t.qeuryStatusList,function(e){return a("div",{key:e.label,staticClass:"query-type-item",class:{active:t.query.onSale===e.value},on:{click:function(a){return t.handerQueryType(e.value)}}},[t._v("\n        "+t._s(e.label)+"\n      ")])}),0),a("div",{staticClass:"query-list"},[a("el-select",{staticClass:"query-list-item",attrs:{placeholder:"请选择商家类型"},on:{change:t.handleScreen},model:{value:t.query.appletId,callback:function(e){t.$set(t.query,"appletId",e)},expression:"query.appletId"}},t._l(t.appletList,function(t,e){return a("el-option",{key:t,attrs:{label:t,value:e}})}),1),a("el-input",{staticClass:"query-list-item keyword",attrs:{placeholder:"输入商品名称"},model:{value:t.query.goodsName,callback:function(e){t.$set(t.query,"goodsName",e)},expression:"query.goodsName"}}),a("el-button",{staticClass:"query-list-item",attrs:{type:"primary"},on:{click:t.handleScreen}},[t._v("搜索")]),a("el-button",{staticClass:"query-list-item",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1)]),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"商品ID",prop:"goodsId"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goodsName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"平台"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.appletList[e.row.appletId])+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.onSale?"在售":"仓库")+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"商品类型"}},[[t._v("\n        拼多多\n      ")]],2),a("el-table-column",{attrs:{label:"优惠券",prop:"couponDiscount"}}),a("el-table-column",{attrs:{label:"优惠券库存",prop:"couponInfo.couponRemainQuantity"}}),a("el-table-column",{attrs:{label:"原价",prop:"formatMinNormalPrice"}}),a("el-table-column",{attrs:{label:"积分消耗"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.pointsInfo.amount||0)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"佣金比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.formatPromotionRate)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"返现比"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s((e.row.pointsInfo.promotionRate||0)/100)+" / "+t._s((e.row.cnyInfo.promotionRate||0)/100)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"商品销量",prop:"salesTip"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.page.currentPage,"page-size":t.page.pageSize,layout:"prev, pager, next",total:t.page.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.page,"currentPage",e)},"update:current-page":function(e){return t.$set(t.page,"currentPage",e)},"update:pageSize":function(e){return t.$set(t.page,"pageSize",e)},"update:page-size":function(e){return t.$set(t.page,"pageSize",e)}}})],1)],1)},ul=[],pl={data:function(){return{loading:!1,query:{onSale:2,appletId:"1",goodsName:""},page:{total:0,currentPage:1,pageSize:20},qeuryStatusList:[{label:"全部商品",value:2},{label:"在售商品",value:1},{label:"仓库中",value:0}],appletList:al.appletList,tableData:[]}},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this;t.loading=!0,Zs(t.getQueryData()).then(function(e){var a=t.page;e.data.forEach(function(t){var e=t.couponInfo,a=e.couponDiscount,n=t.minNormalPrice,r=t.salesConfig,i=t.promotionRate,s={},l={};t.couponDiscount=a?Number(a)/100+"元":"",t.formatMinNormalPrice=n?Number(n)/100+"元":"",t.formatPromotionRate=i/10+"%",r.forEach(function(t){"CNY"===t.type?l=t:s=t}),t.pointsInfo=s,t.cnyInfo=l}),t.tableData=e.data,a.total=Number(e.total),t.loading=!1}).catch(function(){t.loading=!1})},handerQueryType:function(t){this.query.onSale=t,this.handleScreen()},handleScreen:function(t){var e=this;e.page.currentPage=1,e.getDataList()},getQueryData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"screen",e=this,a=e.page,n=e.query,r=n.goodsName,i=n.onSale,s={appletIds:[n.appletId],page:a.currentPage};return r&&(s.goodsName=r),""!==i&&(s.onSale=i),"export"===t&&(s.isExport=1,s.appletIds=String(s.appletIds)),s},exportData:function(){Xs(this.getQueryData("export"))},handleCurrentChange:function(){this.getDataList()}}},dl=pl,ml=(a("b430"),Object(u["a"])(dl,cl,ul,!1,null,"afc0ee52",null)),fl=ml.exports,hl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"good-list"},[a("h2",{staticClass:"title"},[t._v("优惠券列表")]),a("div",{staticClass:"query"},[a("div",{staticClass:"query-list"},[a("el-select",{staticClass:"query-list-item",attrs:{placeholder:"请选择商家类型"},model:{value:t.query.appletId,callback:function(e){t.$set(t.query,"appletId",e)},expression:"query.appletId"}},t._l(t.appletList,function(t,e){return a("el-option",{key:t,attrs:{label:t,value:e}})}),1),a("el-input",{staticClass:"query-list-item keyword",attrs:{clearable:!0,placeholder:"输入优惠券名称"},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}}),a("el-input",{staticClass:"query-list-item keyword",attrs:{clearable:!0,placeholder:"输入优惠券ID"},model:{value:t.query.couponId,callback:function(e){t.$set(t.query,"couponId",e)},expression:"query.couponId"}}),a("el-select",{staticClass:"query-list-item",attrs:{clearable:!0,placeholder:"请选择状态"},model:{value:t.query.isPutaway,callback:function(e){t.$set(t.query,"isPutaway",e)},expression:"query.isPutaway"}},t._l(t.statusList,function(t,e){return a("el-option",{key:t,attrs:{label:t,value:e}})}),1),a("el-date-picker",{staticClass:"query-list-item",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.query.time,callback:function(e){t.$set(t.query,"time",e)},expression:"query.time"}}),a("el-button",{staticClass:"query-list-item",attrs:{type:"primary"},on:{click:t.handleScreen}},[t._v("搜索")]),a("el-button",{staticClass:"query-list-item",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1)]),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"优惠券ID",prop:"couponId"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"formatCreatedDate","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"优惠券名称",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"logo"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px"},attrs:{src:t.row.logo,alt:"",srcset:""}})]}}])}),a("el-table-column",{attrs:{label:"平台",prop:"appletIdName"}}),a("el-table-column",{attrs:{label:"发放数量",prop:"totalNum"}}),a("el-table-column",{attrs:{label:"剩余数量",prop:"surplusNum"}}),a("el-table-column",{attrs:{label:"领取数量",prop:"drawNum"}}),a("el-table-column",{attrs:{label:"曝光次数",prop:"exposureNum"}}),a("el-table-column",{attrs:{label:"状态",prop:"stat"}}),a("el-table-column",{attrs:{label:"优惠券到期时间",prop:"endTime"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.page.currentPage,"page-size":t.page.pageSize,layout:"prev, pager, next",total:t.page.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.page,"currentPage",e)},"update:current-page":function(e){return t.$set(t.page,"currentPage",e)},"update:pageSize":function(e){return t.$set(t.page,"pageSize",e)},"update:page-size":function(e){return t.$set(t.page,"pageSize",e)}}})],1)],1)},gl=[],vl={mixins:[ut],data:function(){return{loading:!1,query:{appletId:"1",isPutaway:"",couponId:"",name:"",time:""},statusList:{0:"下架",1:"上架"},page:{total:0,currentPage:1,pageSize:20},appletList:al.appletList,tableData:[]}},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this;t.loading=!0,tl(t.getQueryData()).then(function(e){var a=t.page,n=t.appletList;e.data.forEach(function(t){t.surplusNum=Number(t.totalNum)-Number(t.drawNum),t.appletIdName=n[t.appletId],t.formatCreatedDate=F(1e3*Number(t.createdAt),"yyyy-MM-dd hh:mm")}),t.tableData=e.data,a.total=Number(e.total),t.loading=!1}).catch(function(){t.loading=!1})},handerQueryType:function(t){this.query.onSale=t,this.handleScreen()},handleScreen:function(t){var e=this;e.page.currentPage=1,e.getDataList()},getQueryData:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this,e=t.page,a=t.query,n=a.couponId,r=a.name,i=a.isPutaway,s=a.time,l={appletId:a.appletId,page:e.currentPage};return n&&(l.couponId=n),r&&(l.name=r),""!==i&&(l.isPutaway=i),s&&(l.startTime=parseInt(s[0].getTime()/1e3),l.endTime=parseInt(s[1].getTime()/1e3)),l},exportData:function(){el(this.getQueryData("export"))},handleCurrentChange:function(){this.getDataList()}}},bl=vl,yl=(a("befa"),Object(u["a"])(bl,hl,gl,!1,null,"e5a10f90",null)),Dl=yl.exports,Cl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},wl=[],_l={name:"platform-user-data",components:{},data:function(){return{}}},kl=_l,xl=(a("9746"),Object(u["a"])(kl,Cl,wl,!1,null,"66b9c339",null)),Sl=xl.exports,Tl={path:"/points-mall",component:Sl,children:[{path:"points-mall-good-list",name:"pointsMallGoodList",component:ol},{path:"points-mall-pdd-good-list",name:"pointsMallPddGoodList",component:fl},{path:"points-mall-coupon-list",name:"pointsMallCouponList",component:Dl}]};l["default"].use(f["a"]);var Pl=new f["a"]({mode:"history",base:"/",routes:[{path:"/",component:D,children:[fn,Ri,Bs,rr,Fr,Tl]},{path:"/login",name:"login",component:X}]}),jl=a("2f62");l["default"].use(jl["a"]);var Al=new jl["a"].Store({state:{userName:"",changedAsideActiveName:""},mutations:{setUserName:function(t,e){t.userName=e},setChangedAsideActiveName:function(t,e){t.changedAsideActiveName=e}},actions:{setUserName:function(t,e){var a=t.commit;a("setUserName",e)},setChangedAsideActiveName:function(t,e){var a=t.commit;a("setChangedAsideActiveName",e)}}});a("fa6d"),a("3cd63");l["default"].use(T.a),l["default"].config.productionTip=!1,l["default"].filter("add_comma_toThousands",function(t){return t?E(t):t}),window.vm=new l["default"]({router:Pl,store:Al,render:function(t){return t(m)}}).$mount("#app")},"576f":function(t,e,a){"use strict";var n=a("7919"),r=a.n(n);r.a},"5c48":function(t,e,a){},"5da2":function(t,e,a){"use strict";var n=a("7014"),r=a.n(n);r.a},"5da4":function(t,e,a){},6676:function(t,e,a){},6711:function(t,e,a){},"674b":function(t,e,a){},"6a3b":function(t,e,a){},"6dc1":function(t,e,a){},"6e85":function(t,e,a){"use strict";var n=a("5214"),r=a.n(n);r.a},"6ea7":function(t,e,a){"use strict";var n=a("6dc1"),r=a.n(n);r.a},7014:function(t,e,a){},"708d":function(t,e,a){"use strict";var n=a("8dec"),r=a.n(n);r.a},"71d2":function(t,e,a){"use strict";var n=a("b50e"),r=a.n(n);r.a},"71dd":function(t,e,a){"use strict";var n=a("cf4f"),r=a.n(n);r.a},7919:function(t,e,a){},"7c55":function(t,e,a){"use strict";var n=a("5c48"),r=a.n(n);r.a},"7ddc":function(t,e,a){},"7fa4":function(t,e,a){},"88b4":function(t,e,a){"use strict";var n=a("c85e"),r=a.n(n);r.a},"88c2":function(t,e,a){},"8bb3":function(t,e,a){"use strict";var n=a("c14d"),r=a.n(n);r.a},"8bec":function(t,e,a){},"8d2f":function(t,e,a){},"8dbc":function(t,e,a){},"8dec":function(t,e,a){},"8df9":function(t,e,a){"use strict";var n=a("0e13"),r=a.n(n);r.a},9746:function(t,e,a){"use strict";var n=a("5da4"),r=a.n(n);r.a},9845:function(t,e,a){"use strict";var n=a("6711"),r=a.n(n);r.a},"9d81":function(t,e,a){},a200:function(t,e,a){"use strict";var n=a("7fa4"),r=a.n(n);r.a},a44f:function(t,e,a){"use strict";var n=a("ecb4"),r=a.n(n);r.a},ab73:function(t,e,a){"use strict";var n=a("bbe1"),r=a.n(n);r.a},accc:function(t,e,a){},ad32:function(t,e,a){},adbf:function(t,e,a){},afac:function(t,e,a){"use strict";var n=a("c93e"),r=a.n(n);r.a},b430:function(t,e,a){"use strict";var n=a("f008"),r=a.n(n);r.a},b443:function(t,e,a){},b50e:function(t,e,a){},b58c:function(t,e,a){},b89d:function(t,e,a){},bbe1:function(t,e,a){},befa:function(t,e,a){"use strict";var n=a("0545"),r=a.n(n);r.a},bf09:function(t,e,a){},c0e7:function(t,e,a){"use strict";var n=a("88c2"),r=a.n(n);r.a},c0ef:function(t,e,a){"use strict";var n=a("0b24"),r=a.n(n);r.a},c14d:function(t,e,a){},c5d6:function(t,e,a){"use strict";var n=a("da54"),r=a.n(n);r.a},c85e:function(t,e,a){},c93e:function(t,e,a){},c94f:function(t,e,a){"use strict";var n=a("bf09"),r=a.n(n);r.a},cc04:function(t,e,a){},ce4c:function(t,e,a){"use strict";var n=a("accc"),r=a.n(n);r.a},cf4f:function(t,e,a){},d213:function(t,e,a){"use strict";var n=a("3832"),r=a.n(n);r.a},d30a:function(t,e,a){},da54:function(t,e,a){},dc84:function(t,e,a){"use strict";var n=a("ad32"),r=a.n(n);r.a},de16:function(t,e,a){"use strict";var n=a("f3e7"),r=a.n(n);r.a},dfcf:function(t,e,a){"use strict";var n=a("31fc"),r=a.n(n);r.a},e456:function(t,e,a){"use strict";var n=a("b89d"),r=a.n(n);r.a},ec18:function(t,e,a){},ecb4:function(t,e,a){},f008:function(t,e,a){},f0aa:function(t,e,a){"use strict";var n=a("0033"),r=a.n(n);r.a},f3e7:function(t,e,a){},f65f:function(t,e,a){"use strict";var n=a("d30a"),r=a.n(n);r.a},fa28:function(t,e,a){},ff76:function(t,e,a){"use strict";var n=a("8d2f"),r=a.n(n);r.a}});
//# sourceMappingURL=app.70dfc4fa.js.map